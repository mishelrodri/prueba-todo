"use strict";(self.webpackChunkclinica_fmp_frontend=self.webpackChunkclinica_fmp_frontend||[]).push([[709],{7926:(q,b,d)=>{d.d(b,{$:()=>Z,Hj:()=>g,Md:()=>v,dp:()=>l});const g=[{value:2,label:2},{value:4,label:4},{value:6,label:6},{value:8,label:8},{value:10,label:10}],Z=3,l=2,v=0},2466:(q,b,d)=>{d.d(b,{i:()=>x});var g=d(5861),Z=d(1571),l=d(3599),v=d(1622);let x=(()=>{class s{constructor(){this.tokenService=(0,Z.f3M)(v.B),this.router=(0,Z.f3M)(l.F0)}canActivate(e){var p=this;return(0,g.Z)(function*(){if(""===p.tokenService.getToken())return p.tokenService.logOut(),!1;try{if(yield p.tokenService.validarToken().toPromise()){const f=e.data.expectedAuthorities,T=p.tokenService.getAuthorities();return"ADMINISTRADOR"===p.tokenService.getRoles()[0]||f&&!!f.some(A=>T.includes(A))||(p.router.navigate(["/inicio"]),!1)}return!1}catch{return!1}})()}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=Z.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},7709:(q,b,d)=>{d.r(b),d.d(b,{ConsultaModule:()=>Ut});var g=d(6895),Z=d(3599),l=d(433),v=d(9861),x=d(5226),s=d.n(x),C=d(7926),e=d(1571),p=d(9061),h=d(723),f=d(2340),T=d(529);let U=(()=>{class n{constructor(t){this.http=t,this.url=`${f.N.api}/censo`,this.isLoading=!1,this.listCenso={content:[],pageable:{sort:{empty:!0,unsorted:!0,sorted:!0},offset:0,pageSize:0,pageNumber:0,paged:!0,unpaged:!0},last:!0,totalPages:0,totalElements:0,size:0,number:0,sort:{empty:!0,unsorted:!0,sorted:!0},empty:!0,first:!0,numberOfElements:0}}agregar(t){return this.http.post(`${this.url}`,t)}eliminar(t){return this.http.delete(`${this.url}/${t}`)}editar(t){return this.http.put(`${this.url}/update/${t.id}`,t)}getCensoByPageFecha(t,i=0,o=10){return this.isLoading=!0,this.http.get(`${this.url}/fecha`,{params:{fechaSelectionada:t.toString(),page:i.toString(),size:o.toString()}}).subscribe(r=>{this.listCenso=r,this.isLoading=!1})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),N=(()=>{class n{constructor(t){this.http=t,this.url=`${f.N.api}/personal-salud`}obtenerMedicos(){return this.http.get(`${this.url}/listarMedico`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),A=(()=>{class n{constructor(t){this.http=t,this.url=`${f.N.api}`,this.isLoading=!1,this.listReferencia={content:[],pageable:{sort:{empty:!0,unsorted:!0,sorted:!0},offset:0,pageSize:0,pageNumber:0,paged:!0,unpaged:!0},last:!0,totalPages:0,totalElements:0,size:0,number:0,sort:{empty:!0,unsorted:!0,sorted:!0},empty:!0,first:!0,numberOfElements:0}}obtenerEspecialidad(){return this.http.get(`${this.url}/especialidad/listarEspecialidad`)}listarEspecialidad(t){return this.http.get(`${this.url}/especialidad/buscar?filtro=${t}`)}listarHospital(){this.http.get(`${this.url}/referencia/listarReferencia`).subscribe({next:t=>{this.hospital=t}})}EspecialidadByID(t){return this.http.get(`${this.url}/especialidad/${t}`)}getHospitalPage(t=0,i=5){return this.isLoading=!0,this.http.get(`${this.url}/referencia`,{params:{page:t.toString(),size:i.toString()}}).subscribe(o=>{this.listReferencia=o,this.isLoading=!1})}agregarReferencia(t){return this.http.post(`${this.url}/referencia`,t)}editar(t){return this.http.put(`${this.url}/referencia/${t.id}`,t)}eliminar(t){return this.http.delete(`${this.url}/referencia/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),E=(()=>{class n{constructor(t){this.http=t,this.url=`${f.N.api}`}obtenerPacientesNI(){return this.http.get(`${this.url}/certificacion/listarPacientesNI`)}obtenerPaciente(t){return this.http.get(`${this.url}/paciente/listarPaciente/${t}`)}obtenerJornada(){return this.http.get(`${this.url}/jornadaMedica/listarPacientesJor`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),J=(()=>{class n{constructor(t){this.http=t,this.url=`${f.N.api}/jornadaMedica`,this.isLoading=!1,this.listJornada={content:[],pageable:{sort:{empty:!0,unsorted:!0,sorted:!0},offset:0,pageSize:0,pageNumber:0,paged:!0,unpaged:!0},last:!0,totalPages:0,totalElements:0,size:0,number:0,sort:{empty:!0,unsorted:!0,sorted:!0},empty:!0,first:!0,numberOfElements:0}}getJornadaByPage(t,i=0,o=5){return this.isLoading=!0,this.http.get(`${this.url}`,{params:{page:i.toString(),size:o.toString(),filtro:t.toString()}}).subscribe(r=>{this.listJornada=r,this.isLoading=!1})}eliminar(t){return this.http.delete(`${this.url}/${t}`)}agregar(t){return this.http.post(`${this.url}`,t)}editar(t){return this.http.put(`${this.url}/${t.id}`,t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var M=d(5053),S=d(1622);const I=["contentJornada"],k=["contentReferencia"];function y(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),r=e.MAs(66);return e.KtG(o.openModal(r))}),e._UZ(2,"i",35),e.qZA()()}}function R(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(),c=e.MAs(68);return e.KtG(r.openLgEditar(c,o))}),e._UZ(1,"i",42),e.qZA()}}function P(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.eliminar(o.id))}),e._UZ(1,"i",44),e.qZA()}}function Y(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"th",36),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td",37)(24,"div",38),e.YNc(25,R,2,0,"button",39),e.YNc(26,P,2,0,"button",40),e.qZA()()()),2&n){const t=a.$implicit,i=a.index,o=e.oxw();e.xp6(2),e.Oqu(i+1),e.xp6(2),e.hij(" ",t.numeroexpediente?t.numeroexpediente:t.numerocertificacion?t.numerocertificacion:"Sin expediente"," "),e.xp6(2),e.hij(" ",t.facultadexpediente?t.facultadexpediente:t.facultadcertificacion?t.facultadcertificacion:t.facultadjornada," "),e.xp6(2),e.hij(" ",t.nombreexpediente?t.nombreexpediente:t.nombrecertificacion?t.nombrecertificacion:t.nombrejornada," "),e.xp6(2),e.hij(" ",t.edadexpediente?t.edadexpediente:t.edadcertificacion?t.edadcertificacion:t.edadjornada," "),e.xp6(2),e.hij(" ",t.generoJornada?t.generoJornada:t.generocertificacion?t.generocertificacion:t.generoexpediente," "),e.xp6(2),e.Oqu(!0===t.primeraconsulta?"Primera":"Subsecuente"),e.xp6(2),e.Oqu(!0===t.emergencia?"Emergencia":"Ordinaria"),e.xp6(2),e.Oqu(t.num_receta?t.num_receta:"No se extendi\xf3"),e.xp6(2),e.Oqu(!0===t.incapacidad?"Extendida":"No"),e.xp6(2),e.Oqu(t.centromedico?t.centromedico:"No"),e.xp6(3),e.Q6J("ngIf",o.isEditar||o.isAdmin),e.xp6(1),e.Q6J("ngIf",o.isEliminar||o.isAdmin)}}function j(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",45),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.isLoading?"cargando ...":"No se encontraron resultados")}}function w(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El campo de fecha es obligatorio"),e.qZA())}function Q(n,a){if(1&n&&(e.TgZ(0,"ng-option",80),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.nombreMedico)}}function O(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El m\xe9dico es obligatorio"),e.qZA())}function G(n,a){if(1&n&&(e.TgZ(0,"ng-option",80),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.nombreCertificacion)}}function D(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El paciente de nuevo ingreso es obligatorio"),e.qZA())}function L(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El estado nutricional es obligatorio"),e.qZA())}function V(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El area es obligatoria"),e.qZA())}function $(n,a){if(1&n&&(e.TgZ(0,"div",81)(1,"label",82),e._uU(2,"Nuevo ingreso"),e.qZA(),e.TgZ(3,"span",56),e._uU(4," *"),e.qZA(),e.TgZ(5,"ng-select",83),e.YNc(6,G,2,2,"ng-option",61),e.qZA(),e.TgZ(7,"div",58),e.YNc(8,D,2,0,"span",27),e.qZA(),e.TgZ(9,"div",52)(10,"div",62)(11,"label",63)(12,"Strong"),e._uU(13,"Censo"),e.qZA()()(),e.TgZ(14,"div",84)(15,"label",85),e._uU(16,"Primera consulta "),e.qZA(),e.TgZ(17,"div",86),e._UZ(18,"input",87),e.qZA()()(),e.TgZ(19,"div",52)(20,"div",84)(21,"div",54)(22,"label",88),e._uU(23,"Estado nutricional"),e.qZA(),e.TgZ(24,"ng-select",89)(25,"ng-option",90),e._uU(26,"Seleccione"),e.qZA(),e.TgZ(27,"ng-option",91),e._uU(28,"Bajo Peso"),e.qZA(),e.TgZ(29,"ng-option",92),e._uU(30,"Peso Normal"),e.qZA(),e.TgZ(31,"ng-option",93),e._uU(32,"Sobrepeso"),e.qZA(),e.TgZ(33,"ng-option",94),e._uU(34,"Obecidad"),e.qZA()(),e.TgZ(35,"div",58),e.YNc(36,L,2,0,"span",27),e.qZA()()(),e.TgZ(37,"div",84)(38,"div",54)(39,"label",95),e._uU(40,"Uso de sustancias"),e.qZA(),e._UZ(41,"ng-select",96),e.qZA()(),e.TgZ(42,"div",84)(43,"div",54)(44,"label",97),e._uU(45,"Area"),e.qZA(),e.TgZ(46,"ng-select",98)(47,"ng-option",90),e._uU(48,"Seleccione"),e.qZA(),e.TgZ(49,"ng-option",99),e._uU(50,"Urbana"),e.qZA(),e.TgZ(51,"ng-option",100),e._uU(52,"Rural"),e.qZA()(),e.TgZ(53,"div",58),e.YNc(54,V,2,0,"span",27),e.qZA()()()()()),2&n){const t=e.oxw(2);let i,o,r;e.xp6(5),e.Tol(t.esCampoValido("certificacion")),e.xp6(1),e.Q6J("ngForOf",t.nuevoingreso),e.xp6(2),e.Q6J("ngIf",null==(i=t.form.get("certificacion"))||null==i.errors?null:i.errors.required),e.xp6(10),e.Tol(t.esCampoValido("primeraconsulta")),e.xp6(6),e.Tol(t.esCampoValido("estadoNutricional")),e.xp6(12),e.Q6J("ngIf",null==(o=t.form.get("estadoNutricional"))||null==o.errors?null:o.errors.required),e.xp6(5),e.Q6J("items",t.vicios)("multiple",!0),e.xp6(5),e.Tol(t.esCampoValido("area")),e.xp6(8),e.Q6J("ngIf",null==(r=t.form.get("area"))||null==r.errors?null:r.errors.required)}}function z(n,a){if(1&n&&(e.TgZ(0,"ng-option",80),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.nombreEstudiante)}}function B(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El paciente es obligatorio"),e.qZA())}function H(n,a){if(1&n&&(e.TgZ(0,"div",81)(1,"label",101),e._uU(2,"Pacientes"),e.qZA(),e.TgZ(3,"span",56),e._uU(4," *"),e.qZA(),e.TgZ(5,"ng-select",102),e.YNc(6,z,2,2,"ng-option",61),e.qZA(),e.TgZ(7,"div",58),e.YNc(8,B,2,0,"span",27),e.qZA()()),2&n){const t=e.oxw(2);let i;e.xp6(5),e.Tol(t.esCampoValido("expediente")),e.xp6(1),e.Q6J("ngForOf",t.pacientes),e.xp6(2),e.Q6J("ngIf",null==(i=t.form.get("expediente"))||null==i.errors?null:i.errors.required)}}function K(n,a){if(1&n&&(e.TgZ(0,"ng-option",80),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.pacienteJornada)}}function W(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El paciente es obligatorio"),e.qZA())}function X(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",107),e._UZ(1,"br"),e.TgZ(2,"button",108),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.openModalJornada())}),e._UZ(3,"i",35),e.qZA()()}}function ee(n,a){if(1&n&&(e.TgZ(0,"div",52)(1,"div",103)(2,"label",104),e._uU(3,"Jornada"),e.qZA(),e.TgZ(4,"span",56),e._uU(5," *"),e.qZA(),e.TgZ(6,"ng-select",105),e.YNc(7,K,2,2,"ng-option",61),e.qZA(),e.TgZ(8,"div",58),e.YNc(9,W,2,0,"span",27),e.qZA()(),e.YNc(10,X,4,0,"div",106),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(6),e.Tol(t.esCampoValido("jornadaMedica")),e.xp6(1),e.Q6J("ngForOf",t.jornada),e.xp6(2),e.Q6J("ngIf",null==(i=t.form.get("jornadaMedica"))||null==i.errors?null:i.errors.required),e.xp6(1),e.Q6J("ngIf",t.isCrear||t.isAdmin)}}function te(n,a){if(1&n&&(e.TgZ(0,"ng-option",80),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.centro_medico)}}function ne(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El detalle de referencia es obligatorio"),e.qZA())}function ie(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",107),e._UZ(1,"br"),e.TgZ(2,"button",108),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4);return e.KtG(o.openModalReferencias())}),e._UZ(3,"i",35),e.qZA()()}}function oe(n,a){if(1&n&&(e.TgZ(0,"div",52)(1,"div",62)(2,"label",63)(3,"Strong"),e._uU(4,"Detalles de Referencia"),e.qZA()()(),e.TgZ(5,"div",114)(6,"div",115)(7,"label",116),e._uU(8,"Centro medico"),e.qZA(),e.TgZ(9,"span",56),e._uU(10," *"),e.qZA(),e.TgZ(11,"ng-select",117),e.YNc(12,te,2,2,"ng-option",61),e.qZA(),e.TgZ(13,"div",58),e.YNc(14,ne,2,0,"span",27),e.qZA()()(),e.YNc(15,ie,4,0,"div",106),e.qZA()),2&n){const t=e.oxw(3);let i;e.xp6(11),e.Tol(t.esCampoValido("referencia")),e.xp6(1),e.Q6J("ngForOf",t.listarHospital),e.xp6(2),e.Q6J("ngIf",null==(i=t.form.get("referencia"))||null==i.errors?null:i.errors.required),e.xp6(1),e.Q6J("ngIf",t.isCrear||t.isAdmin)}}function ae(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",52)(1,"div",62)(2,"label",63)(3,"Strong"),e._uU(4,"Censo"),e.qZA()()(),e.TgZ(5,"div",109)(6,"label",85),e._uU(7,"Primera consulta "),e.qZA(),e.TgZ(8,"div",86),e._UZ(9,"input",87),e.qZA()(),e.TgZ(10,"div",109)(11,"label",85),e._uU(12,"Emergencia "),e.qZA(),e.TgZ(13,"div",86),e._UZ(14,"input",110),e.qZA()(),e.TgZ(15,"div",109)(16,"label",85),e._uU(17,"Incapacidad "),e.qZA(),e.TgZ(18,"div",86),e._UZ(19,"input",111),e.qZA()(),e.TgZ(20,"div",109)(21,"label"),e._uU(22,"No. receta "),e.qZA(),e._UZ(23,"input",112),e.qZA(),e.TgZ(24,"div",52)(25,"div",81)(26,"label",85),e._uU(27,"Referencia "),e.qZA(),e.TgZ(28,"div",86)(29,"input",113),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.toggleDetallesReferencia())}),e.qZA()()(),e.YNc(30,oe,16,5,"div",74),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(9),e.Tol(t.esCampoValido("primeraconsulta")),e.xp6(5),e.Tol(t.esCampoValido("emergencia")),e.xp6(5),e.Tol(t.esCampoValido("incapacidad")),e.xp6(4),e.Tol(t.esCampoValido("numReceta")),e.xp6(6),e.Tol(t.esCampoValido("checkRef")),e.xp6(1),e.Q6J("ngIf",t.mostrarDetallesReferencia)}}function re(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El diagn\xf3stico es obligatorio"),e.qZA())}function le(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",46)(1,"h4",47),e._uU(2,"Censo M\xe9dico"),e.qZA(),e.TgZ(3,"button",48),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"form",49),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.guardar())}),e.TgZ(5,"div",50)(6,"div",51)(7,"div",52)(8,"div",53)(9,"div",54)(10,"label",55),e._uU(11,"Fecha de creaci\xf3n del registro"),e.qZA(),e.TgZ(12,"span",56),e._uU(13," *"),e.qZA(),e._UZ(14,"input",57),e.TgZ(15,"div",58),e.YNc(16,w,2,0,"span",27),e.qZA()()(),e.TgZ(17,"div",53)(18,"div",54)(19,"label",59),e._uU(20,"M\xe9dico"),e.qZA(),e.TgZ(21,"span",56),e._uU(22," *"),e.qZA(),e.TgZ(23,"ng-select",60),e.YNc(24,Q,2,2,"ng-option",61),e.qZA(),e.TgZ(25,"div",58),e.YNc(26,O,2,0,"span",27),e.qZA()()()(),e.TgZ(27,"div",52)(28,"div",62)(29,"label",63)(30,"Strong"),e._uU(31,"Seleccione tipo de paciente"),e.qZA()()(),e.TgZ(32,"div",64)(33,"div",65)(34,"label",66),e._UZ(35,"input",67),e._uU(36," Nuevo ingreso "),e.qZA()(),e.TgZ(37,"div",68)(38,"label",66),e._UZ(39,"input",69),e._uU(40," Antiguo Ingreso "),e.qZA()(),e.TgZ(41,"div",68)(42,"label",66),e._UZ(43,"input",70),e._uU(44," Empleado "),e.qZA()(),e.TgZ(45,"div",68)(46,"label",66),e._UZ(47,"input",71),e._uU(48," otro "),e.qZA()(),e.TgZ(49,"div",68)(50,"label",66),e._UZ(51,"input",72),e._uU(52," jornada "),e.qZA()()(),e.YNc(53,$,55,14,"div",73),e.YNc(54,H,9,4,"div",73),e.YNc(55,ee,11,5,"div",74),e.qZA(),e.YNc(56,ae,31,11,"div",74),e.TgZ(57,"div",52)(58,"div",62)(59,"label",75),e._uU(60,"Diagn\xf3stico"),e.qZA(),e._UZ(61,"textarea",76),e.TgZ(62,"div",58),e.YNc(63,re,2,0,"span",27),e.qZA()()()()(),e.TgZ(64,"div",77)(65,"button",78),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Close click"))}),e._uU(66,"Cerrar"),e.qZA(),e.TgZ(67,"button",79),e._uU(68,"Guardar"),e.qZA()()()}if(2&n){const t=e.oxw();let i,o,r,c,u,_,m;e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(10),e.Tol(t.esCampoValido("fecha")),e.xp6(2),e.Q6J("ngIf",null==(i=t.form.get("fecha"))||null==i.errors?null:i.errors.required),e.xp6(7),e.Tol(t.esCampoValido("personalSalud")),e.xp6(1),e.Q6J("ngForOf",t.medicos),e.xp6(2),e.Q6J("ngIf",null==(o=t.form.get("personalSalud"))||null==o.errors?null:o.errors.required),e.xp6(27),e.Q6J("ngIf","4"===(null==(r=t.form.get("tPaciente"))?null:r.value)),e.xp6(1),e.Q6J("ngIf","1"===(null==(c=t.form.get("tPaciente"))?null:c.value)||"2"===(null==(c=t.form.get("tPaciente"))?null:c.value)||"3"===(null==(c=t.form.get("tPaciente"))?null:c.value)),e.xp6(1),e.Q6J("ngIf","5"===(null==(u=t.form.get("tPaciente"))?null:u.value)),e.xp6(1),e.Q6J("ngIf","4"!==(null==(_=t.form.get("tPaciente"))?null:_.value)),e.xp6(5),e.Tol(t.esCampoValido("diagnostico")),e.xp6(2),e.Q6J("ngIf",null==(m=t.form.get("diagnostico"))||null==m.errors?null:m.errors.required)}}function ce(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El campo de fecha es obligatorio"),e.qZA())}function se(n,a){if(1&n&&(e.TgZ(0,"ng-option",80),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.nombreMedico)}}function de(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El m\xe9dico es obligatorio"),e.qZA())}function ue(n,a){if(1&n&&(e.TgZ(0,"ng-option",80),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.nombreCertificacion)}}function pe(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El paciente de nuevo ingreso es obligatorio"),e.qZA())}function _e(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El estado nutricional es obligatorio"),e.qZA())}function me(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El area es obligatoria"),e.qZA())}function ge(n,a){if(1&n&&(e.TgZ(0,"div",81)(1,"label",82),e._uU(2,"Nuevo ingreso"),e.qZA(),e.TgZ(3,"span",56),e._uU(4," *"),e.qZA(),e.TgZ(5,"ng-select",83),e.YNc(6,ue,2,2,"ng-option",61),e.qZA(),e.TgZ(7,"div",58),e.YNc(8,pe,2,0,"span",27),e.qZA(),e.TgZ(9,"div",52)(10,"div",62)(11,"label",63)(12,"Strong"),e._uU(13,"Censo"),e.qZA()()(),e.TgZ(14,"div",84)(15,"label",85),e._uU(16,"Primera consulta "),e.qZA(),e.TgZ(17,"div",86),e._UZ(18,"input",87),e.qZA()()(),e.TgZ(19,"div",52)(20,"div",84)(21,"div",54)(22,"label",88),e._uU(23,"Estado nutricional"),e.qZA(),e.TgZ(24,"span",56),e._uU(25," *"),e.qZA(),e.TgZ(26,"ng-select",89)(27,"ng-option",90),e._uU(28,"Seleccione"),e.qZA(),e.TgZ(29,"ng-option",91),e._uU(30,"Bajo Peso"),e.qZA(),e.TgZ(31,"ng-option",92),e._uU(32,"Peso Normal"),e.qZA(),e.TgZ(33,"ng-option",93),e._uU(34,"Sobrepeso"),e.qZA(),e.TgZ(35,"ng-option",94),e._uU(36,"Obecidad"),e.qZA()(),e.TgZ(37,"div",58),e.YNc(38,_e,2,0,"span",27),e.qZA()()(),e.TgZ(39,"div",84)(40,"div",54)(41,"label",95),e._uU(42,"Uso de sustancias"),e.qZA(),e._UZ(43,"ng-select",96),e.qZA()(),e.TgZ(44,"div",84)(45,"div",54)(46,"label",97),e._uU(47,"Estado nutricional"),e.qZA(),e.TgZ(48,"span",56),e._uU(49," *"),e.qZA(),e.TgZ(50,"ng-select",98)(51,"ng-option",90),e._uU(52,"Seleccione"),e.qZA(),e.TgZ(53,"ng-option",99),e._uU(54,"Urbana"),e.qZA(),e.TgZ(55,"ng-option",100),e._uU(56,"Rural"),e.qZA()(),e.TgZ(57,"div",58),e.YNc(58,me,2,0,"span",27),e.qZA()()()()()),2&n){const t=e.oxw(2);let i,o,r;e.xp6(5),e.Tol(t.esCampoValido("certificacion")),e.xp6(1),e.Q6J("ngForOf",t.nuevoingreso),e.xp6(2),e.Q6J("ngIf",null==(i=t.form.get("certificacion"))||null==i.errors?null:i.errors.required),e.xp6(10),e.Tol(t.esCampoValido("primeraconsulta")),e.xp6(8),e.Tol(t.esCampoValido("estadoNutricional")),e.xp6(12),e.Q6J("ngIf",null==(o=t.form.get("estadoNutricional"))||null==o.errors?null:o.errors.required),e.xp6(5),e.Q6J("items",t.vicios)("multiple",!0),e.xp6(7),e.Tol(t.esCampoValido("area")),e.xp6(8),e.Q6J("ngIf",null==(r=t.form.get("area"))||null==r.errors?null:r.errors.required)}}function fe(n,a){if(1&n&&(e.TgZ(0,"ng-option",80),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.nombreEstudiante)}}function Ze(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El paciente es obligatorio"),e.qZA())}function he(n,a){if(1&n&&(e.TgZ(0,"div",81)(1,"label",101),e._uU(2,"Pacientes"),e.qZA(),e.TgZ(3,"span",56),e._uU(4," *"),e.qZA(),e.TgZ(5,"ng-select",102),e.YNc(6,fe,2,2,"ng-option",61),e.qZA(),e.TgZ(7,"div",58),e.YNc(8,Ze,2,0,"span",27),e.qZA()()),2&n){const t=e.oxw(2);let i;e.xp6(5),e.Tol(t.esCampoValido("expediente")),e.xp6(1),e.Q6J("ngForOf",t.pacientes),e.xp6(2),e.Q6J("ngIf",null==(i=t.form.get("expediente"))||null==i.errors?null:i.errors.required)}}function ve(n,a){if(1&n&&(e.TgZ(0,"ng-option",80),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.pacienteJornada)}}function Te(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El paciente es obligatorio"),e.qZA())}function Ce(n,a){if(1&n&&(e.TgZ(0,"div",81)(1,"label",104),e._uU(2,"Jornada"),e.qZA(),e.TgZ(3,"span",56),e._uU(4," *"),e.qZA(),e.TgZ(5,"ng-select",105),e.YNc(6,ve,2,2,"ng-option",61),e.qZA(),e.TgZ(7,"div",58),e.YNc(8,Te,2,0,"span",27),e.qZA()()),2&n){const t=e.oxw(2);let i;e.xp6(5),e.Tol(t.esCampoValido("jornadaMedica")),e.xp6(1),e.Q6J("ngForOf",t.jornada),e.xp6(2),e.Q6J("ngIf",null==(i=t.form.get("jornadaMedica"))||null==i.errors?null:i.errors.required)}}function be(n,a){if(1&n&&(e.TgZ(0,"ng-option",80),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.centro_medico)}}function xe(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El detalle de referencia es obligatorio"),e.qZA())}function Ae(n,a){if(1&n&&(e.TgZ(0,"div",52)(1,"div",62)(2,"label",63)(3,"Strong"),e._uU(4,"Detalles de Referencia"),e.qZA()()(),e.TgZ(5,"div",119)(6,"div",54)(7,"label",116),e._uU(8,"Centro medico"),e.qZA(),e.TgZ(9,"span",56),e._uU(10," *"),e.qZA(),e.TgZ(11,"ng-select",117),e.YNc(12,be,2,2,"ng-option",61),e.qZA(),e.TgZ(13,"div",58),e.YNc(14,xe,2,0,"span",27),e.qZA()()()()),2&n){const t=e.oxw(3);let i;e.xp6(11),e.Tol(t.esCampoValido("referencia")),e.xp6(1),e.Q6J("ngForOf",t.listarHospital),e.xp6(2),e.Q6J("ngIf",null==(i=t.form.get("referencia"))||null==i.errors?null:i.errors.required)}}function qe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",52)(1,"div",62)(2,"label",63)(3,"Strong"),e._uU(4,"Censo"),e.qZA()()(),e.TgZ(5,"div",109)(6,"label",85),e._uU(7,"Primera consulta "),e.qZA(),e.TgZ(8,"div",86),e._UZ(9,"input",87),e.qZA()(),e.TgZ(10,"div",109)(11,"label",85),e._uU(12,"Emergencia "),e.qZA(),e.TgZ(13,"div",86),e._UZ(14,"input",110),e.qZA()(),e.TgZ(15,"div",109)(16,"label",85),e._uU(17,"Incapacidad "),e.qZA(),e.TgZ(18,"div",86),e._UZ(19,"input",111),e.qZA()(),e.TgZ(20,"div",109)(21,"label"),e._uU(22,"No. receta "),e.qZA(),e._UZ(23,"input",112),e.qZA(),e.TgZ(24,"div",52)(25,"div",81)(26,"label",85),e._uU(27,"Referencia "),e.qZA(),e.TgZ(28,"div",86)(29,"input",113),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.toggleDetallesReferencia())}),e.qZA()()(),e.YNc(30,Ae,15,4,"div",74),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(9),e.Tol(t.esCampoValido("primeraconsulta")),e.xp6(5),e.Tol(t.esCampoValido("emergencia")),e.xp6(5),e.Tol(t.esCampoValido("incapacidad")),e.xp6(4),e.Tol(t.esCampoValido("numReceta")),e.xp6(6),e.Tol(t.esCampoValido("checkRef")),e.xp6(1),e.Q6J("ngIf",t.mostrarDetallesReferencia)}}function Ue(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El diagn\xf3stico es obligatorio"),e.qZA())}function Ne(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",46)(1,"h4",47),e._uU(2,"Censo M\xe9dico"),e.qZA(),e.TgZ(3,"button",48),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"form",49),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.editar())}),e.TgZ(5,"div",50)(6,"div",51)(7,"div",52)(8,"div",53)(9,"div",54)(10,"label",55),e._uU(11,"Fecha de creaci\xf3n del registro"),e.qZA(),e.TgZ(12,"span",56),e._uU(13," *"),e.qZA(),e._UZ(14,"input",118),e.TgZ(15,"div",58),e.YNc(16,ce,2,0,"span",27),e.qZA()()(),e.TgZ(17,"div",53)(18,"div",54)(19,"label",59),e._uU(20,"M\xe9dico"),e.qZA(),e.TgZ(21,"span",56),e._uU(22," *"),e.qZA(),e.TgZ(23,"ng-select",60),e.YNc(24,se,2,2,"ng-option",61),e.qZA(),e.TgZ(25,"div",58),e.YNc(26,de,2,0,"span",27),e.qZA()()()(),e.TgZ(27,"div",52)(28,"div",62)(29,"label",63)(30,"Strong"),e._uU(31,"Seleccione tipo de paciente"),e.qZA()()(),e.TgZ(32,"div",64)(33,"div",65)(34,"label",66),e._UZ(35,"input",67),e._uU(36," Nuevo ingreso "),e.qZA()(),e.TgZ(37,"div",68)(38,"label",66),e._UZ(39,"input",69),e._uU(40," Empleado "),e.qZA()(),e.TgZ(41,"div",68)(42,"label",66),e._UZ(43,"input",70),e._uU(44," Trabajador "),e.qZA()(),e.TgZ(45,"div",68)(46,"label",66),e._UZ(47,"input",71),e._uU(48," otro "),e.qZA()(),e.TgZ(49,"div",68)(50,"label",66),e._UZ(51,"input",72),e._uU(52," jornada "),e.qZA()()(),e.YNc(53,ge,59,14,"div",73),e.YNc(54,he,9,4,"div",73),e.YNc(55,Ce,9,4,"div",73),e.qZA(),e.YNc(56,qe,31,11,"div",74),e.TgZ(57,"div",52)(58,"div",62)(59,"label",75),e._uU(60,"Diagn\xf3stico"),e.qZA(),e._UZ(61,"textarea",76),e.TgZ(62,"div",58),e.YNc(63,Ue,2,0,"span",27),e.qZA()()()()(),e.TgZ(64,"div",77)(65,"button",78),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Close click"))}),e._uU(66,"Cerrar"),e.qZA(),e.TgZ(67,"button",79),e._uU(68,"Guardar"),e.qZA()()()}if(2&n){const t=e.oxw();let i,o,r,c,u,_,m;e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(10),e.Tol(t.esCampoValido("fecha")),e.s9C("max",t.obtenerFechaFormateada()),e.xp6(2),e.Q6J("ngIf",null==(i=t.form.get("fecha"))||null==i.errors?null:i.errors.required),e.xp6(7),e.Tol(t.esCampoValido("personalSalud")),e.xp6(1),e.Q6J("ngForOf",t.medicos),e.xp6(2),e.Q6J("ngIf",null==(o=t.form.get("personalSalud"))||null==o.errors?null:o.errors.required),e.xp6(27),e.Q6J("ngIf","4"===(null==(r=t.form.get("tPaciente"))?null:r.value)),e.xp6(1),e.Q6J("ngIf","1"===(null==(c=t.form.get("tPaciente"))?null:c.value)||"2"===(null==(c=t.form.get("tPaciente"))?null:c.value)||"3"===(null==(c=t.form.get("tPaciente"))?null:c.value)),e.xp6(1),e.Q6J("ngIf","5"===(null==(u=t.form.get("tPaciente"))?null:u.value)),e.xp6(1),e.Q6J("ngIf","4"!==(null==(_=t.form.get("tPaciente"))?null:_.value)),e.xp6(5),e.Tol(t.esCampoValido("diagnostico")),e.xp6(2),e.Q6J("ngIf",null==(m=t.form.get("diagnostico"))||null==m.errors?null:m.errors.required)}}function Je(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El detalle es obligatorio"),e.qZA())}function Me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",46)(1,"h4",47),e._uU(2,"Nuevo detalle de referencia"),e.qZA(),e.TgZ(3,"button",48),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"form",120)(5,"div",50)(6,"div",51)(7,"div",52)(8,"div",121)(9,"div",54)(10,"label",122),e._uU(11,"Nombre"),e.qZA(),e.TgZ(12,"span",56),e._uU(13," *"),e.qZA(),e._UZ(14,"input",123),e.TgZ(15,"div",58),e.YNc(16,Je,2,0,"span",27),e.qZA()()()()()(),e.TgZ(17,"div",77)(18,"button",78),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Close click"))}),e._uU(19,"Cerrar"),e.qZA(),e.TgZ(20,"button",124),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.guardarReferencia())}),e._uU(21,"Guardar"),e.qZA()()()}if(2&n){const t=e.oxw();let i;e.xp6(4),e.Q6J("formGroup",t.FrormReferencia),e.xp6(10),e.Tol(t.esCampoValido("centroMedico")),e.xp6(2),e.Q6J("ngIf",null==(i=t.FrormReferencia.get("centroMedico"))||null==i.errors?null:i.errors.required)}}function Se(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"La fecha es obligatoria"),e.qZA())}function Fe(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El genero es obligatorio"),e.qZA())}function Ee(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El nombre del paciente es obligatorio"),e.qZA())}function Ie(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El apellido es obligatorio"),e.qZA())}function ke(n,a){if(1&n&&(e.TgZ(0,"ng-option",80),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.nombre)}}function ye(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"La facultad es obligatoria"),e.qZA())}function Re(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"La fecha es un obligatorio"),e.qZA())}function Pe(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"La fecha es un obligatorio"),e.qZA())}function Ye(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",46)(1,"h4",47),e._uU(2,"Paciente"),e.qZA(),e.TgZ(3,"button",48),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"form",120)(5,"div",50)(6,"div",51)(7,"div",52)(8,"div",119)(9,"div",54)(10,"label",55),e._uU(11,"Fecha de creaci\xf3n del registro"),e.qZA(),e.TgZ(12,"span",56),e._uU(13," *"),e.qZA(),e._UZ(14,"input",118),e.TgZ(15,"div",58),e.YNc(16,Se,2,0,"span",27),e.qZA()()(),e.TgZ(17,"div",119)(18,"div",54)(19,"label",116),e._uU(20,"Sexo"),e.qZA(),e.TgZ(21,"span",56),e._uU(22," *"),e.qZA(),e.TgZ(23,"ng-select",125)(24,"ng-option",90),e._uU(25,"Seleccione"),e.qZA(),e.TgZ(26,"ng-option",126),e._uU(27,"Masculino"),e.qZA(),e.TgZ(28,"ng-option",127),e._uU(29,"Femenino"),e.qZA()(),e.TgZ(30,"div",58),e.YNc(31,Fe,2,0,"span",27),e.qZA()()(),e.TgZ(32,"div",119)(33,"div",54)(34,"label",128),e._uU(35,"Nombre"),e.qZA(),e.TgZ(36,"span",56),e._uU(37," *"),e.qZA(),e._UZ(38,"input",129),e.TgZ(39,"div",58),e.YNc(40,Ee,2,0,"span",27),e.qZA()()(),e.TgZ(41,"div",119)(42,"div",54)(43,"label",130),e._uU(44,"Apellido"),e.qZA(),e.TgZ(45,"span",56),e._uU(46," *"),e.qZA(),e._UZ(47,"input",131),e.TgZ(48,"div",58),e.YNc(49,Ie,2,0,"span",27),e.qZA()()()(),e.TgZ(50,"div",52)(51,"div",119)(52,"div",54)(53,"label",132),e._uU(54,"Facultad"),e.qZA(),e.TgZ(55,"span",56),e._uU(56," *"),e.qZA(),e.TgZ(57,"ng-select",133),e.YNc(58,ke,2,2,"ng-option",61),e.qZA(),e.TgZ(59,"div",58),e.YNc(60,ye,2,0,"span",27),e.qZA()()(),e.TgZ(61,"div",119)(62,"div",54)(63,"label",134),e._uU(64,"Fecha de Nacimiento"),e.qZA(),e.TgZ(65,"span",56),e._uU(66," *"),e.qZA(),e._UZ(67,"input",135),e.TgZ(68,"div",58),e.YNc(69,Re,2,0,"span",27),e.YNc(70,Pe,2,0,"span",27),e.qZA()()()()()(),e.TgZ(71,"div",77)(72,"button",78),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Close click"))}),e._uU(73,"Cerrar"),e.qZA(),e.TgZ(74,"button",124),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.guardarJornada())}),e._uU(75,"Guardar"),e.qZA()()()}if(2&n){const t=e.oxw();let i,o,r,c,u,_,m;e.xp6(4),e.Q6J("formGroup",t.formJornada),e.xp6(10),e.Tol(t.esCampoValido("fecha")),e.s9C("max",t.obtenerFechaFormateada()),e.xp6(2),e.Q6J("ngIf",null==(i=t.formJornada.get("fecha"))||null==i.errors?null:i.errors.required),e.xp6(7),e.Tol(t.esCampoValido("genero")),e.xp6(8),e.Q6J("ngIf",null==(o=t.formJornada.get("genero"))||null==o.errors?null:o.errors.required),e.xp6(7),e.Tol(t.esCampoValido("nombrePaciente")),e.xp6(2),e.Q6J("ngIf",null==(r=t.formJornada.get("nombrePaciente"))||null==r.errors?null:r.errors.required),e.xp6(7),e.Tol(t.esCampoValido("apellidoPaciente")),e.xp6(2),e.Q6J("ngIf",null==(c=t.formJornada.get("apellidoPaciente"))||null==c.errors?null:c.errors.required),e.xp6(8),e.Tol(t.esCampoValido("idFacutad")),e.xp6(1),e.Q6J("ngForOf",t.listarFacultad),e.xp6(2),e.Q6J("ngIf",null==(u=t.formJornada.get("idFacutad"))||null==u.errors?null:u.errors.required),e.xp6(7),e.Tol(t.esCampoValido("fechaNacimiento")),e.s9C("max",t.obtenerFechaFormateada()),e.xp6(2),e.Q6J("ngIf",null==(_=t.formJornada.get("fechaNacimiento"))||null==_.errors?null:_.errors.required),e.xp6(1),e.Q6J("ngIf",null==(m=t.formJornada.get("fechaNacimiento"))||null==m.errors?null:m.errors.edadMinima)}}let we=(()=>{class n{constructor(t,i,o,r,c,u,_,m,Nt,Jt){this.modalService=t,this.config=i,this.CensoService=o,this.medicoService=r,this.especialidadService=c,this.pacientesService=u,this.jornadaMedicaService=_,this.serviceFacultad=m,this.fb=Nt,this.tokenService=Jt,this.medicos=[],this.nuevoingreso=[],this.pacientes=[],this.jornada=[],this.seGuardo=!1,this.opciones=["1","2","3"],this.mostrarDetallesReferencia=!1,this.verOtros=!0,this.currentPage=1,this.pageSize=10,this.vicios=[{vicio:"ALCOHOL"},{vicio:"DROGAS"},{vicio:"TABACO"},{vicio:"OTRO"}],this.maxSize=C.$,this.isCrear=!1,this.isEditar=!1,this.isEliminar=!1,this.isAdmin=!1,this.permiso="CENSO_MEDICO_"}ngOnInit(){this.isAdmin=this.tokenService.isSuperAdmin(),this.isCrear=this.tokenService.isPermisos(this.permiso,"CREAR"),this.isEditar=this.tokenService.isPermisos(this.permiso,"EDITAR"),this.isEliminar=this.tokenService.isPermisos(this.permiso,"ELIMINAR"),this.iniciarcampos(),this.iniciarJornada(),this.iniciarReferencia(),this.medicos=[],this.obtenerMedicos(),this.nuevoingreso=[],this.obtenerPacientesNI(),this.jornada=[],this.obtenerPacientesJornada(),this.CensoService.getCensoByPageFecha(this.obtenerFechaFormateada()),this.especialidadService.listarHospital(),this.form.reset()}get listCenso(){return this.CensoService.listCenso}get isLoading(){return this.CensoService.isLoading}get listarHospital(){return this.especialidadService.hospital}get listarFacultad(){return this.serviceFacultad.facultad}get formatDate(){return v.Z}obtenerFechaFormateada(){return this.formatDate().format("YYYY-MM-DD")}iniciarcampos(){this.form=this.fb.group({fecha:[this.obtenerFechaFormateada(),[l.kI.required]],personalSalud:[null,[l.kI.required]],certificacion:[null,[]],expediente:[null,[]],jornadaMedica:[null,[]],primeraconsulta:["",[]],emergencia:["",[]],incapacidad:["",[]],numReceta:["",[]],diagnostico:["",[l.kI.required]],tPaciente:["",[l.kI.required]],checkRef:[!1,[]],estadoNutricional:[null,[]],area:[null,[]],vicioList:["",[]],referencia:[null,[]]}),this.form.get("tPaciente").valueChanges.subscribe(t=>{this.pacientes=[],this.form.get("certificacion")?.clearValidators(),this.form.get("expediente")?.clearValidators(),this.form.get("jornadaMedica")?.clearValidators(),this.form.get("certificacion")?.updateValueAndValidity(),this.form.get("expediente")?.updateValueAndValidity(),this.form.get("jornadaMedica")?.updateValueAndValidity(),"4"===t?(this.form.get("certificacion")?.setValidators([l.kI.required]),this.form.get("expediente")?.setValue(null),this.form.get("jornadaMedica")?.setValue(null)):["1","2","3"].includes(t)?(this.form.get("expediente")?.setValidators([l.kI.required]),this.form.get("certificacion")?.setValue(null),this.form.get("jornadaMedica")?.setValue(null)):"5"===t&&(this.form.get("jornadaMedica")?.setValidators([l.kI.required]),this.form.get("expediente")?.setValue(null),this.form.get("certificacion")?.setValue(null)),this.form.get("certificacion")?.updateValueAndValidity(),this.form.get("expediente")?.updateValueAndValidity(),this.form.get("jornadaMedica")?.updateValueAndValidity(),t&&this.pacientesService.obtenerPaciente(t).subscribe({next:i=>{this.pacientes=i}})}),this.form.get("checkRef")?.valueChanges.subscribe(t=>{const i=this.form.get("referencia");i?.clearValidators(),i?.setValue(i?.value),!0===t&&i?.setValidators([l.kI.required]),i?.setValue(i?.value)})}iniciarReferencia(){this.FrormReferencia=this.fb.group({centroMedico:["",[l.kI.required]]})}edadMinima(t){const i=t.value,o=new Date,r=new Date(i);return o.getFullYear()-r.getFullYear()<15?{edadMinima:!0}:null}iniciarJornada(){this.formJornada=this.fb.group({fecha:[this.obtenerFechaFormateada(),[l.kI.required]],idFacutad:[null,[l.kI.required]],nombrePaciente:["",[l.kI.required]],apellidoPaciente:["",[l.kI.required]],fechaNacimiento:["",[l.kI.required,this.edadMinima]],genero:[null,[l.kI.required]]}),this.serviceFacultad.listar()}esCampoValido(t){const i=this.form.get(t);return!i?.valid&&i?.touched?"is-invalid":i?.touched?"is-valid":""}getFormattedDate(t){return t.toISOString().split("T")[0]}openModal(t){this.form.reset(),this.iniciarcampos(),this.mostrarDetallesReferencia=!1,this.seGuardo=!1,this.modalService.open(t,{size:"lg",centered:!0})}openModalReferencias(){this.iniciarReferencia(),this.seGuardo=!1,this.modalReferencia=this.modalService.open(this.contentReferncia,{size:"auto",centered:!0})}openModalJornada(){this.iniciarJornada(),this.seGuardo=!1,this.modalJornada=this.modalService.open(this.contentJornada,{size:"lg",centered:!0})}pageChange(t){this.CensoService.getCensoByPageFecha(this.obtenerFechaFormateada(),t-1,this.pageSize)}obtenerMedicos(){this.medicoService.obtenerMedicos().subscribe(t=>{this.medicos=t})}obtenerPacientesNI(){this.pacientesService.obtenerPacientesNI().subscribe(t=>{this.nuevoingreso=t})}obtenerPacientesJornada(){this.pacientesService.obtenerJornada().subscribe(t=>{this.jornada=t})}guardar(){if(this.seGuardo=!0,!this.form.valid)return void s().fire({position:"center",title:"Error",text:"Faltan datos en el formulario",icon:"warning"});const t=this.form.value;t.vicioList?t.vicioList.length>0&&(t.vicio=t.vicioList.sort().join("_")):t.vicio=null,this.CensoService.agregar(this.form.value).subscribe({next:()=>{s().fire({position:"center",title:"Buen trabajo",text:"Datos guardados con exito",icon:"success"}),this.CensoService.getCensoByPageFecha(this.obtenerFechaFormateada()),this.seGuardo=!1,this.modalService.dismissAll(),this.form.reset()},error:i=>{s().fire({position:"center",title:"Error",text:i.error.mensaje,icon:"error"})}})}eliminar(t){s().fire({title:"\xbfEstas seguro?",text:"Esta opcion no se puede revertir!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, elimina esto!",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.CensoService.eliminar(t).subscribe({next:o=>{s().fire("Eliminado!","El registro ha sido borrado.","success"),o&&this.CensoService.getCensoByPageFecha(this.obtenerFechaFormateada())},error:o=>{s().fire({position:"center",title:"Error",text:o.error.mensaje,icon:"error"})}})})}editar(){if(this.seGuardo=!0,!this.form.valid||!this.censo.id)return void s().fire({position:"center",title:"Formulario no v\xe1lido",text:"Faltan datos en el formulario o el ID del censo no est\xe1 definido",icon:"warning"});const t=this.form.value;t.id=this.censo.id,t.vicioList?t.vicioList.length>0&&(t.vicio=t.vicioList.sort().join("_")):t.vicio=null,this.CensoService.editar(t).subscribe({next:()=>{s().fire({position:"center",title:"Buen trabajo",text:"Datos actualizados con \xe9xito",icon:"success"}),this.CensoService.getCensoByPageFecha(this.obtenerFechaFormateada()),this.form.reset(),this.seGuardo=!1,this.modalService.dismissAll()},error:()=>{s().fire({position:"center",title:"Error",text:"Algo sali\xf3 mal, contacte a soporte",icon:"error"})}})}openLgEditar(t,i){this.form.reset(),this.mostrarDetallesReferencia=!1,this.censo=i,this.form.patchValue({fecha:this.getFormattedDate(new Date(this.censo.fecha)),personalSalud:this.censo.personal_salud_id,certificacion:this.censo.certificacion_id,expediente:this.censo.expediente_id,jornadaMedica:this.censo.jornada_id,primeraconsulta:this.censo.primeraconsulta,emergencia:this.censo.emergencia,incapacidad:this.censo.incapacidad,numReceta:this.censo.num_receta,diagnostico:this.censo.diagnostico,tPaciente:this.opciones.includes(this.censo.tpaciente2)?this.censo.tpaciente2:this.censo.certificacion_id?"4":"5",estadoNutricional:this.censo.estadoNutricional,area:this.censo.area,vicioList:this.censo.vicio?this.censo.vicio.split("_"):[],referencia:this.censo.idreferencia}),null!==this.censo.idreferencia&&(this.form.get("checkRef")?.setValue(!0),this.mostrarDetallesReferencia=!0),this.modalService.open(t,{size:"lg"})}toggleDetallesReferencia(){this.mostrarDetallesReferencia=!this.mostrarDetallesReferencia}onCensoFechaChange(){null!=this.fechaSeleccionada&&this.CensoService.getCensoByPageFecha(this.getFormattedDate(new Date(this.fechaSeleccionada)))}guardarReferencia(){this.seGuardo=!0,this.FrormReferencia.valid?this.especialidadService.agregarReferencia(this.FrormReferencia.value).subscribe({next:()=>{s().fire({position:"center",title:"Buen trabajo",text:"Datos guardados con exito",icon:"success"}),this.seGuardo=!1,this.modalReferencia.dismiss("Cross click"),this.especialidadService.listarHospital(),this.FrormReferencia.reset()},error:t=>{s().fire({position:"center",title:"Error",text:t.error.mensaje,icon:"error"})}}):s().fire({position:"center",title:"Error",text:"Faltan datos en el formulario",icon:"warning"})}calcularEdad(t){const i=new Date(t),o=new Date,r=o.getFullYear()-i.getFullYear(),c=o.getMonth()+1,u=o.getDate();return c<i.getMonth()+1||c===i.getMonth()+1&&u<i.getDate()?r-1:r}guardarJornada(){this.seGuardo=!0,this.formJornada.get("fechaNacimiento")?.hasError("edadMinima")?s().fire({position:"center",title:"Error",text:"La fecha de nacimiento debe ser mayor a 15 a\xf1os",icon:"warning"}):this.formJornada.valid?this.jornadaMedicaService.agregar(this.formJornada.value).subscribe({next:()=>{s().fire({position:"center",title:"Buen trabajo",text:"Datos guardados con exito",icon:"success"}),this.seGuardo=!1,this.modalJornada.dismiss("Cross click"),this.obtenerPacientesJornada(),this.formJornada.reset()},error:t=>{s().fire({position:"center",title:"Error",text:t.error.mensaje,icon:"error"})}}):s().fire({position:"center",title:"Error",text:"Faltan datos en el formulario",icon:"warning"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.FF),e.Y36(h.$q),e.Y36(U),e.Y36(N),e.Y36(A),e.Y36(E),e.Y36(J),e.Y36(M.U),e.Y36(l.qu),e.Y36(S.B))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-censo"]],viewQuery:function(t,i){if(1&t&&(e.Gf(I,5),e.Gf(k,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.contentJornada=o.first),e.iGM(o=e.CRH())&&(i.contentReferncia=o.first)}},features:[e._Bn([g.uU])],decls:73,vars:10,consts:[[1,"container-full"],[1,"d-flex","justify-content-end","mb-3"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink",""],["aria-current","page",1,"breadcrumb-item","active","text-danger"],[1,"d-flex","justify-content-between","mb-3"],[1,"fs-2"],["class","d-flex justify-content-end",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],[1,"mb-2","d-flex","align-items-center"],["for","table-filtering-search",1,"col-xs-3","col-sm-auto","col-form-label","me-1"],[1,"col-xs-3","col-sm-auto"],[1,"form-select",2,"width","auto","height","auto",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","15"],["for","table-filtering-search",1,"col-xs-3","col-sm-auto","col-form-label","ms-1"],[1,"d-flex","align-items-center","mb-3"],["for","fecha"],["type","date","id","fecha","name","fecha",1,"form-control",3,"ngModel","ngModelChange"],[1,"table-responsive","mt-5"],[1,"table"],[1,"border-dark"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex","justify-content-end","p-2",3,"pageSize","collectionSize","maxSize","rotate","boundaryLinks","pageChange","page"],["content",""],["contentEdit",""],["contentReferencia",""],["contentJornada",""],[1,"d-flex","justify-content-end"],[1,"btn","btn-primary","fs-4",3,"click"],[1,"bi","bi-plus-square"],["scope","row"],[1,"col"],[1,"d-flex","justify-content-end","gap-1"],["type","button","class","btn btn-outline-success me-2",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-success","me-2",3,"click"],[1,"bi","bi-pencil"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-x-lg"],["colspan","12",1,"text-center"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"container-fluid"],[1,"row"],[1,"col-lg-6","ms-auto"],[1,"mb-3"],["for","fecha",1,"form-label"],[1,"text-danger"],["type","date","formControlName","fecha","id","fecha",1,"form-control"],[1,"invalid-feedback"],["for","personalSalud",1,"form-label"],["formControlName","personalSalud","id","personalSalud","placeholder","Seleccione"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-12"],["for",""],[1,"row","p-2"],[1,"col-lg-3","form-check"],[1,"form-check-label"],["type","radio","formControlName","tPaciente","value","4",1,"form-check-input"],[1,"col-lg-2","form-check"],["type","radio","formControlName","tPaciente","value","1",1,"form-check-input"],["type","radio","formControlName","tPaciente","value","2",1,"form-check-input"],["type","radio","formControlName","tPaciente","value","3",1,"form-check-input"],["type","radio","formControlName","tPaciente","value","5",1,"form-check-input"],["class","col-lg-12 ms-auto",4,"ngIf"],["class","row",4,"ngIf"],["for","select"],["formControlName","diagnostico","id","diagnostico","placeholder","Ingrese diagn\xf3stico",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary"],[3,"value"],[1,"col-lg-12","ms-auto"],["for","certificacion",1,"form-label"],["formControlName","certificacion","id","certificacion","placeholder","Seleccione"],[1,"col-4"],["for","defaultCheck1",1,"form-check-label"],[1,"form-check","form-switch"],["type","checkbox","id","primeraconsulta","formControlName","primeraconsulta",1,"form-check-input"],["for","estadoNutricional",1,"form-label"],["formControlName","estadoNutricional","id","estadoNutricional","placeholder","Seleccione una opci\xf3n"],["selected","","disabled",""],["value","bajoPeso"],["value","pesoNormal"],["value","sobrepeso"],["value","obecidad"],["for","vicio",1,"form-label"],["formControlName","vicioList","id","vicio","placeholder","Seleccione los vicios","bindLabel","vicio","bindValue","vicio",3,"items","multiple"],["for","area",1,"form-label"],["formControlName","area","id","area","placeholder","Seleccione una opci\xf3n"],["value","urbana"],["value","rural"],["for","expediente",1,"form-label"],["formControlName","expediente","id","expediente","placeholder","Seleccione"],[1,"col-lg-10"],["for","jornadaMedica",1,"form-label"],["formControlName","jornadaMedica","id","jornadaMedica","placeholder","Seleccione"],["class","col-lg-2",4,"ngIf"],[1,"col-lg-2"],["type","button",1,"btn","btn-primary","fs-6",3,"click"],[1,"col-lg-3","ms-auto"],["type","checkbox","id","emergencia","formControlName","emergencia",1,"form-check-input"],["type","checkbox","id","incapacidad","formControlName","incapacidad",1,"form-check-input"],["type","number","formControlName","numReceta","id","numReceta","placeholder","Ingrese n\xfamero",1,"form-control"],["type","checkbox","formControlName","checkRef","id","checkRef",1,"form-check-input",3,"click"],[1,"col-lg-9"],[1,"mb-3","fs-6"],["for","genero",1,"form-label"],["formControlName","referencia","id","referencia"],["type","date","formControlName","fecha","id","fecha",1,"form-control",3,"max"],[1,"col-6"],[3,"formGroup"],[1,"col-12"],["for","centroMedico",1,"form-label"],["type","text","formControlName","centroMedico","id","centroMedico","placeholder","Ingrese el nombre",1,"form-control"],["type","button",1,"btn","btn-primary",3,"click"],["formControlName","genero","id","genero","placeholder","Seleccione una opci\xf3n"],["value","masculino"],["value","femenino"],["for","nombrePaciente",1,"form-label"],["type","text","formControlName","nombrePaciente","id","nombrePaciente","placeholder","Ingrese el nombre",1,"form-control"],["for","apellidoPaciente",1,"form-label"],["type","text","formControlName","apellidoPaciente","id","apellidoPaciente","placeholder","Ingrese apellido",1,"form-control"],["for","idFacutad",1,"form-label"],["formControlName","idFacutad","id","idFacutad","placeholder","Seleccione una facultad"],["for","fecha ",1,"form-label"],["type","date","formControlName","fechaNacimiento","id","fechaNacimiento",1,"form-control",3,"max"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),e._uU(6,"Inicio "),e.qZA()(),e.TgZ(7,"li",6),e._uU(8,"Censo diario"),e.qZA()()()(),e.TgZ(9,"div",7)(10,"div")(11,"h1",8),e._uU(12,"Censo diario m\xe9dico"),e.qZA()(),e.YNc(13,y,3,0,"div",9),e.qZA(),e.TgZ(14,"div",10)(15,"div",11)(16,"label",12),e._uU(17,"Mostrar"),e.qZA(),e.TgZ(18,"div",13)(19,"select",14),e.NdJ("ngModelChange",function(r){return i.pageSize=r})("ngModelChange",function(){return i.pageChange(1)}),e.TgZ(20,"option",15),e._uU(21,"5"),e.qZA(),e.TgZ(22,"option",16),e._uU(23,"10"),e.qZA(),e.TgZ(24,"option",17),e._uU(25,"15"),e.qZA()()(),e.TgZ(26,"label",18),e._uU(27,"Registros"),e.qZA()(),e.TgZ(28,"form")(29,"div",19)(30,"label",20),e._uU(31,"Buscar:"),e.qZA(),e.TgZ(32,"input",21),e.NdJ("ngModelChange",function(r){return i.fechaSeleccionada=r})("ngModelChange",function(){return i.onCensoFechaChange()}),e.qZA()()()(),e.TgZ(33,"div",22)(34,"table",23)(35,"thead")(36,"tr",24)(37,"th",25),e._uU(38,"#"),e.qZA(),e.TgZ(39,"th",25),e._uU(40,"No. de expediente"),e.qZA(),e.TgZ(41,"th",25),e._uU(42,"Facultad"),e.qZA(),e.TgZ(43,"th",25),e._uU(44,"Paciente"),e.qZA(),e.TgZ(45,"th",25),e._uU(46,"Edad"),e.qZA(),e.TgZ(47,"th",25),e._uU(48,"G\xe9nero"),e.qZA(),e.TgZ(49,"th",25),e._uU(50,"Consulta"),e.qZA(),e.TgZ(51,"th",25),e._uU(52,"Tipo Consulta"),e.qZA(),e.TgZ(53,"th",25),e._uU(54,"No. Receta"),e.qZA(),e.TgZ(55,"th",25),e._uU(56,"Incapacidad"),e.qZA(),e.TgZ(57,"th",25),e._uU(58,"Referencia"),e.qZA(),e.TgZ(59,"th",25),e._uU(60,"Acciones"),e.qZA()()(),e.TgZ(61,"tbody"),e.YNc(62,Y,27,13,"tr",26),e.YNc(63,j,3,1,"tr",27),e.qZA()()(),e.TgZ(64,"ngb-pagination",28),e.NdJ("pageChange",function(r){return i.pageChange(r)})("page",function(){return i.currentPage}),e.qZA(),e.YNc(65,le,69,15,"ng-template",null,29,e.W1O),e.YNc(67,Ne,69,16,"ng-template",null,30,e.W1O),e.YNc(69,Me,22,4,"ng-template",null,31,e.W1O),e.YNc(71,Ye,76,23,"ng-template",null,32,e.W1O),e.qZA()),2&t&&(e.xp6(13),e.Q6J("ngIf",i.isCrear||i.isAdmin),e.xp6(6),e.Q6J("ngModel",i.pageSize),e.xp6(13),e.Q6J("ngModel",i.fechaSeleccionada),e.xp6(30),e.Q6J("ngForOf",i.listCenso.content),e.xp6(1),e.Q6J("ngIf",0===i.listCenso.content.length),e.xp6(1),e.Q6J("pageSize",i.listCenso.pageable.pageSize)("collectionSize",i.listCenso.totalElements)("maxSize",i.maxSize)("rotate",!0)("boundaryLinks",!0))},dependencies:[g.sg,g.O5,Z.yS,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.Wl,l.EJ,l._,l.JJ,l.JL,l.On,l.F,l.sg,l.u,p.N9,h.w9,h.jq]}),n})();function Qe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),r=e.MAs(56);return e.KtG(o.openModal(r))}),e._UZ(2,"i",33),e.qZA()()}}function Oe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(),c=e.MAs(58);return e.KtG(r.openLgEditar(c,o))}),e._UZ(1,"i",40),e.qZA()}}function Ge(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.eliminar(o.id))}),e._UZ(1,"i",42),e.qZA()}}function De(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"th",34),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td",35)(15,"div",36),e.YNc(16,Oe,2,0,"button",37),e.YNc(17,Ge,2,0,"button",38),e.qZA()()()),2&n){const t=a.$implicit,i=a.index,o=e.oxw();e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(e.xi3(5,10,t.fecha,"dd/MM/yyyy")),e.xp6(3),e.Oqu(t.facultad.nombre),e.xp6(2),e.lnq("",t.nombrePaciente,""," ","",t.apellidoPaciente,""),e.xp6(2),e.Oqu(o.calcularEdad(t.fechaNacimiento)),e.xp6(2),e.Oqu(t.genero),e.xp6(3),e.Q6J("ngIf",o.isEditar||o.isAdmin),e.xp6(1),e.Q6J("ngIf",o.isEliminar||o.isAdmin)}}function Le(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",43),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.isLoading?"cargando ...":"No se encontraron resultados")}}function Ve(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"La fecha es obligatoria"),e.qZA())}function $e(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El genero es obligatorio"),e.qZA())}function ze(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El nombre del paciente es obligatorio"),e.qZA())}function Be(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El apellido es obligatorio"),e.qZA())}function He(n,a){if(1&n&&(e.TgZ(0,"ng-option",74),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.nombre)}}function Ke(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"La facultad es obligatoria"),e.qZA())}function We(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"La fecha es un obligatorio"),e.qZA())}function Xe(n,a){1&n&&(e.TgZ(0,"div",54),e._uU(1," La fecha de nacimiento debe ser mayor a 15 a\xf1os. "),e.qZA())}function et(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",44)(1,"h4",45),e._uU(2,"Paciente"),e.qZA(),e.TgZ(3,"button",46),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"form",47),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.guardar())}),e.TgZ(5,"div",48)(6,"div",49)(7,"div",50)(8,"div",51)(9,"div",52)(10,"label",53),e._uU(11,"Fecha de creaci\xf3n del registro"),e.qZA(),e.TgZ(12,"span",54),e._uU(13," *"),e.qZA(),e._UZ(14,"input",55),e.TgZ(15,"div",56),e.YNc(16,Ve,2,0,"span",27),e.qZA()()(),e.TgZ(17,"div",51)(18,"div",52)(19,"label",57),e._uU(20,"Sexo"),e.qZA(),e.TgZ(21,"span",54),e._uU(22," *"),e.qZA(),e.TgZ(23,"ng-select",58)(24,"ng-option",59),e._uU(25,"Masculino"),e.qZA(),e.TgZ(26,"ng-option",60),e._uU(27,"Femenino"),e.qZA()(),e.TgZ(28,"div",56),e.YNc(29,$e,2,0,"span",27),e.qZA()()(),e.TgZ(30,"div",51)(31,"div",52)(32,"label",61),e._uU(33,"Nombre"),e.qZA(),e.TgZ(34,"span",54),e._uU(35," *"),e.qZA(),e._UZ(36,"input",62),e.TgZ(37,"div",56),e.YNc(38,ze,2,0,"span",27),e.qZA()()(),e.TgZ(39,"div",51)(40,"div",52)(41,"label",63),e._uU(42,"Apellido"),e.qZA(),e.TgZ(43,"span",54),e._uU(44," *"),e.qZA(),e._UZ(45,"input",64),e.TgZ(46,"div",56),e.YNc(47,Be,2,0,"span",27),e.qZA()()()(),e.TgZ(48,"div",50)(49,"div",51)(50,"div",52)(51,"label",65),e._uU(52,"Facultad"),e.qZA(),e.TgZ(53,"span",54),e._uU(54," *"),e.qZA(),e.TgZ(55,"ng-select",66),e.YNc(56,He,2,2,"ng-option",67),e.qZA(),e.TgZ(57,"div",56),e.YNc(58,Ke,2,0,"span",27),e.qZA()()(),e.TgZ(59,"div",51)(60,"div",52)(61,"label",68),e._uU(62,"Fecha de Nacimiento"),e.qZA(),e.TgZ(63,"span",54),e._uU(64," *"),e.qZA(),e._UZ(65,"input",69),e.TgZ(66,"div",56),e.YNc(67,We,2,0,"span",27),e.YNc(68,Xe,2,0,"div",70),e.qZA()()()()()(),e.TgZ(69,"div",71)(70,"button",72),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Close click"))}),e._uU(71,"Cerrar"),e.qZA(),e.TgZ(72,"button",73),e._uU(73,"Guardar"),e.qZA()()()}if(2&n){const t=e.oxw();let i,o,r,c,u,_,m;e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(10),e.Tol(t.esCampoValido("fecha")),e.s9C("max",t.obtenerFechaFormateada()),e.xp6(2),e.Q6J("ngIf",null==(i=t.form.get("fecha"))||null==i.errors?null:i.errors.required),e.xp6(7),e.Tol(t.esCampoValido("genero")),e.xp6(6),e.Q6J("ngIf",null==(o=t.form.get("genero"))||null==o.errors?null:o.errors.required),e.xp6(7),e.Tol(t.esCampoValido("nombrePaciente")),e.xp6(2),e.Q6J("ngIf",null==(r=t.form.get("nombrePaciente"))||null==r.errors?null:r.errors.required),e.xp6(7),e.Tol(t.esCampoValido("apellidoPaciente")),e.xp6(2),e.Q6J("ngIf",null==(c=t.form.get("apellidoPaciente"))||null==c.errors?null:c.errors.required),e.xp6(8),e.Tol(t.esCampoValido("idFacutad")),e.xp6(1),e.Q6J("ngForOf",t.listarFacultad),e.xp6(2),e.Q6J("ngIf",null==(u=t.form.get("idFacutad"))||null==u.errors?null:u.errors.required),e.xp6(7),e.Tol(t.esCampoValido("fechaNacimiento")),e.xp6(2),e.Q6J("ngIf",null==(_=t.form.get("fechaNacimiento"))||null==_.errors?null:_.errors.required),e.xp6(1),e.Q6J("ngIf",null==(m=t.form.get("fechaNacimiento"))?null:m.hasError("edadInvalida"))}}function tt(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"La fecha es obligatoria"),e.qZA())}function nt(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El genero es obligatorio"),e.qZA())}function it(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El nombre del paciente es obligatorio"),e.qZA())}function ot(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El personal de salud es obligatorio"),e.qZA())}function at(n,a){if(1&n&&(e.TgZ(0,"ng-option",74),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.nombre)}}function rt(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"La facultad es obligatoria"),e.qZA())}function lt(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"La fecha es un obligatorio"),e.qZA())}function ct(n,a){1&n&&(e.TgZ(0,"div",54),e._uU(1," La fecha de nacimiento debe ser mayor a 15 a\xf1os. "),e.qZA())}function st(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",44)(1,"h4",45),e._uU(2,"Paciente"),e.qZA(),e.TgZ(3,"button",46),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"form",47),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.editar())}),e.TgZ(5,"div",48)(6,"div",49)(7,"div",50)(8,"div",51)(9,"div",52)(10,"label",53),e._uU(11,"Fecha de creaci\xf3n del registro"),e.qZA(),e.TgZ(12,"span",54),e._uU(13," *"),e.qZA(),e._UZ(14,"input",75),e.TgZ(15,"div",56),e.YNc(16,tt,2,0,"span",27),e.qZA()()(),e.TgZ(17,"div",51)(18,"div",52)(19,"label",57),e._uU(20,"Sexo"),e.qZA(),e.TgZ(21,"span",54),e._uU(22," *"),e.qZA(),e.TgZ(23,"ng-select",58)(24,"ng-option",59),e._uU(25,"Masculino"),e.qZA(),e.TgZ(26,"ng-option",60),e._uU(27,"Femenino"),e.qZA()(),e.TgZ(28,"div",56),e.YNc(29,nt,2,0,"span",27),e.qZA()()(),e.TgZ(30,"div",51)(31,"div",52)(32,"label",61),e._uU(33,"Nombre"),e.qZA(),e.TgZ(34,"span",54),e._uU(35," *"),e.qZA(),e._UZ(36,"input",62),e.TgZ(37,"div",56),e.YNc(38,it,2,0,"span",27),e.qZA()()(),e.TgZ(39,"div",51)(40,"div",52)(41,"label",63),e._uU(42,"Apellido"),e.qZA(),e.TgZ(43,"span",54),e._uU(44," *"),e.qZA(),e._UZ(45,"input",64),e.TgZ(46,"div",56),e.YNc(47,ot,2,0,"span",27),e.qZA()()()(),e.TgZ(48,"div",50)(49,"div",51)(50,"div",52)(51,"label",65),e._uU(52,"Facultad"),e.qZA(),e.TgZ(53,"span",54),e._uU(54," *"),e.qZA(),e.TgZ(55,"ng-select",66),e.YNc(56,at,2,2,"ng-option",67),e.qZA(),e.TgZ(57,"div",56),e.YNc(58,rt,2,0,"span",27),e.qZA()()(),e.TgZ(59,"div",51)(60,"div",52)(61,"label",68),e._uU(62,"Fecha de Nacimiento"),e.qZA(),e.TgZ(63,"span",54),e._uU(64," *"),e.qZA(),e._UZ(65,"input",69),e.TgZ(66,"div",56),e.YNc(67,lt,2,0,"span",27),e.YNc(68,ct,2,0,"div",70),e.qZA()()()()()(),e.TgZ(69,"div",71)(70,"button",72),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Close click"))}),e._uU(71,"Cerrar"),e.qZA(),e.TgZ(72,"button",73),e._uU(73,"Guardar"),e.qZA()()()}if(2&n){const t=e.oxw();let i,o,r,c,u,_,m;e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(10),e.Tol(t.esCampoValido("fecha")),e.xp6(2),e.Q6J("ngIf",null==(i=t.form.get("fecha"))||null==i.errors?null:i.errors.required),e.xp6(7),e.Tol(t.esCampoValido("genero")),e.xp6(6),e.Q6J("ngIf",null==(o=t.form.get("genero"))||null==o.errors?null:o.errors.required),e.xp6(7),e.Tol(t.esCampoValido("nombrePaciente")),e.xp6(2),e.Q6J("ngIf",null==(r=t.form.get("nombrePaciente"))||null==r.errors?null:r.errors.required),e.xp6(7),e.Tol(t.esCampoValido("apellidoPaciente")),e.xp6(2),e.Q6J("ngIf",null==(c=t.form.get("apellidoPaciente"))||null==c.errors?null:c.errors.required),e.xp6(8),e.Tol(t.esCampoValido("idFacutad")),e.xp6(1),e.Q6J("ngForOf",t.listarFacultad),e.xp6(2),e.Q6J("ngIf",null==(u=t.form.get("idFacutad"))||null==u.errors?null:u.errors.required),e.xp6(7),e.Tol(t.esCampoValido("fechaNacimiento")),e.xp6(2),e.Q6J("ngIf",null==(_=t.form.get("fechaNacimiento"))||null==_.errors?null:_.errors.required),e.xp6(1),e.Q6J("ngIf",null==(m=t.form.get("fechaNacimiento"))?null:m.hasError("edadInvalida"))}}let ut=(()=>{class n{constructor(t,i,o,r,c){this.modalService=t,this.jornadaMedicaService=i,this.serviceFacultad=o,this.fb=r,this.tokenService=c,this.currentPage=1,this.seGuardo=!1,this.isCrear=!1,this.isEditar=!1,this.isEliminar=!1,this.isAdmin=!1,this.permiso="JORNADA_MEDICA_",this.maxSize=C.$,this.pageSize=5}ngOnInit(){this.isAdmin=this.tokenService.isSuperAdmin(),this.isCrear=this.tokenService.isPermisos(this.permiso,"CREAR"),this.isEditar=this.tokenService.isPermisos(this.permiso,"EDITAR"),this.isEliminar=this.tokenService.isPermisos(this.permiso,"ELIMINAR"),this.jornadaMedicaService.getJornadaByPage(""),this.formularioJornada(),this.serviceFacultad.listar()}get listJornada(){return this.jornadaMedicaService.listJornada}get isLoading(){return this.jornadaMedicaService.isLoading}get listarFacultad(){return this.serviceFacultad.facultad}get formatDate(){return v.Z}obtenerFechaFormateada(){return this.formatDate().format("YYYY-MM-DD")}formularioJornada(){this.form=this.fb.group({fecha:[this.getFormattedDate(new Date),[l.kI.required]],idFacutad:[null,[l.kI.required]],nombrePaciente:["",[l.kI.required]],apellidoPaciente:["",[l.kI.required]],fechaNacimiento:["",[l.kI.required]],genero:[null,[l.kI.required]]})}calcularEdad(t){const i=new Date(t),o=new Date,r=o.getFullYear()-i.getFullYear(),c=o.getMonth()+1,u=o.getDate();return c<i.getMonth()+1||c===i.getMonth()+1&&u<i.getDate()?r-1:r}esCampoValido(t){const i=this.form.get(t);return!i?.valid&&i?.touched?"is-invalid":i?.touched?"is-valid":""}getFormattedDate(t){return t.toISOString().split("T")[0]}pageChange(t){this.jornadaMedicaService.getJornadaByPage("",t-1,this.pageSize)}openModal(t){this.form.reset(),this.formularioJornada(),this.seGuardo=!1,this.modalService.open(t,{size:"lg",centered:!0})}eliminar(t){s().fire({title:"Estas seguro?",text:"Esta opcion no se puede revertir!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, elimina esto!",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.jornadaMedicaService.eliminar(t).subscribe({next:o=>{s().fire("Eliminado!","El registro ha sido borrado.","success"),o&&this.jornadaMedicaService.getJornadaByPage("")},error:()=>{s().fire({position:"center",title:"Error",text:"No se puede eliminar, el paciente ya es parte del censo",icon:"error"})}})})}guardar(){this.seGuardo=!0,this.form.valid?(this.validarEdad(),this.form.get("fechaNacimiento")?.hasError("edadInvalida")?s().fire({position:"center",title:"Error",text:"La fecha de nacimiento debe ser mayor a 15 a\xf1os",icon:"warning"}):this.jornadaMedicaService.agregar(this.form.value).subscribe({next:()=>{s().fire({position:"center",title:"Buen trabajo",text:"Datos guardados con exito",icon:"success"}),this.jornadaMedicaService.getJornadaByPage(""),this.seGuardo=!1,this.modalService.dismissAll(),this.form.reset()},error:t=>{s().fire({position:"center",title:"Error",text:t.error.mensaje,icon:"error"}),this.form.reset()}})):s().fire({position:"center",title:"Error",text:"Faltan datos en el formulario",icon:"warning"})}editar(){if(this.seGuardo=!0,!this.form.valid||!this.jornadamedica.id)return void s().fire({position:"center",title:"Formulario no v\xe1lido",text:"Faltan datos en el formulario o el ID del censo no est\xe1 definido",icon:"warning"});const t=this.form.value;t.id=this.jornadamedica.id,this.validarEdad(),this.form.get("fechaNacimiento")?.hasError("edadInvalida")?s().fire({position:"center",title:"Error",text:"La fecha de nacimiento debe ser mayor a 15 a\xf1os",icon:"warning"}):this.jornadaMedicaService.editar(t).subscribe({next:()=>{s().fire({position:"center",title:"Buen trabajo",text:"Datos guardados con \xe9xito",icon:"success"}),this.jornadaMedicaService.getJornadaByPage(""),this.seGuardo=!1,this.modalService.dismissAll(),this.form.reset()},error:()=>{s().fire({position:"center",title:"Error",text:"Algo sali\xf3 mal, contacte a soporte",icon:"error"})}})}openLgEditar(t,i){this.jornadamedica=i,this.form.patchValue({fecha:this.getFormattedDate(new Date(this.jornadamedica.fecha)),idFacutad:this.jornadamedica.facultad.id,nombrePaciente:this.jornadamedica.nombrePaciente,apellidoPaciente:this.jornadamedica.apellidoPaciente,fechaNacimiento:this.getFormattedDate(new Date(this.jornadamedica.fechaNacimiento)),genero:this.jornadamedica.genero}),this.modalService.open(t,{size:"lg",centered:!0})}validarEdad(){const t=this.form.get("fechaNacimiento");t&&(this.calcularEdad(new Date(t.value))<15?t.setErrors({edadInvalida:!0}):t.setErrors(null))}onjornadaFiltroChange(){null!=this.filtro&&this.jornadaMedicaService.getJornadaByPage(this.filtro)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.FF),e.Y36(J),e.Y36(M.U),e.Y36(l.qu),e.Y36(S.B))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-jornada-medica"]],decls:59,vars:10,consts:[[1,"container-full"],[1,"d-flex","justify-content-end","mb-3"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink",""],["aria-current","page",1,"breadcrumb-item","active","text-danger"],[1,"d-flex","justify-content-between","mb-3"],[1,"fs-2"],["class","d-flex justify-content-end",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],[1,"mb-2","d-flex","align-items-center"],["for","table-filtering-search",1,"col-xs-3","col-sm-auto","col-form-label","me-1"],[1,"col-xs-3","col-sm-auto"],[1,"form-select",2,"width","auto","height","auto",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","15"],["for","table-filtering-search",1,"col-xs-3","col-sm-auto","col-form-label","ms-1"],[1,"d-flex","align-items-center","mb-3"],["for","filtro"],["type","text","id","filtro","name","fecha",1,"form-control",3,"ngModel","ngModelChange"],[1,"table-responsive","mt-5"],[1,"table"],[1,"border-dark"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex","justify-content-end","p-2",3,"pageSize","collectionSize","maxSize","rotate","boundaryLinks","pageChange","page"],["content",""],["contentEdit",""],[1,"d-flex","justify-content-end"],[1,"btn","btn-primary","fs-4",3,"click"],[1,"bi","bi-plus-square"],["scope","row"],[1,"col"],[1,"d-flex","justify-content-end","gap-1"],["type","button","class","btn btn-outline-success me-2",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-success","me-2",3,"click"],[1,"bi","bi-pencil"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-x-lg"],["colspan","12",1,"text-center"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"mb-3"],["for","fecha",1,"form-label"],[1,"text-danger"],["type","date","formControlName","fecha","id","fecha",1,"form-control",3,"max"],[1,"invalid-feedback"],["for","genero",1,"form-label"],["formControlName","genero","id","genero","placeholder","Seleccione una opci\xf3n"],["value","masculino"],["value","femenino"],["for","nombrePaciente",1,"form-label"],["type","text","formControlName","nombrePaciente","id","nombrePaciente","placeholder","Ingrese el nombre",1,"form-control"],["for","apellidoPaciente",1,"form-label"],["type","text","formControlName","apellidoPaciente","id","apellidoPaciente","placeholder","Ingrese apellido",1,"form-control"],["for","idFacutad",1,"form-label"],["formControlName","idFacutad","id","idFacutad","placeholder","Seleccione una facultad"],[3,"value",4,"ngFor","ngForOf"],["for","fecha ",1,"form-label"],["type","date","formControlName","fechaNacimiento","id","fechaNacimiento",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary"],[3,"value"],["type","date","formControlName","fecha","id","fecha",1,"form-control"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),e._uU(6,"Inicio "),e.qZA()(),e.TgZ(7,"li",6),e._uU(8,"Paciente jornada medica"),e.qZA()()()(),e.TgZ(9,"div",7)(10,"div")(11,"h1",8),e._uU(12,"Paciente jornada medica"),e.qZA()(),e.YNc(13,Qe,3,0,"div",9),e.qZA(),e.TgZ(14,"div",10)(15,"div",11)(16,"label",12),e._uU(17,"Mostrar"),e.qZA(),e.TgZ(18,"div",13)(19,"select",14),e.NdJ("ngModelChange",function(r){return i.pageSize=r})("ngModelChange",function(){return i.pageChange(1)}),e.TgZ(20,"option",15),e._uU(21,"5"),e.qZA(),e.TgZ(22,"option",16),e._uU(23,"10"),e.qZA(),e.TgZ(24,"option",17),e._uU(25,"15"),e.qZA()()(),e.TgZ(26,"label",18),e._uU(27,"Registros"),e.qZA()(),e.TgZ(28,"form")(29,"div",19)(30,"label",20),e._uU(31,"Buscar:"),e.qZA(),e.TgZ(32,"input",21),e.NdJ("ngModelChange",function(r){return i.filtro=r})("ngModelChange",function(){return i.onjornadaFiltroChange()}),e.qZA()()()(),e.TgZ(33,"div",22)(34,"table",23)(35,"thead")(36,"tr",24)(37,"th",25),e._uU(38,"#"),e.qZA(),e.TgZ(39,"th",25),e._uU(40,"Fecha del registro"),e.qZA(),e.TgZ(41,"th",25),e._uU(42,"Facultad"),e.qZA(),e.TgZ(43,"th",25),e._uU(44,"Paciente"),e.qZA(),e.TgZ(45,"th",25),e._uU(46,"Edad"),e.qZA(),e.TgZ(47,"th",25),e._uU(48,"Sexo"),e.qZA(),e.TgZ(49,"th",25),e._uU(50,"Acciones"),e.qZA()()(),e.TgZ(51,"tbody"),e.YNc(52,De,18,13,"tr",26),e.YNc(53,Le,3,1,"tr",27),e.qZA()()(),e.TgZ(54,"ngb-pagination",28),e.NdJ("pageChange",function(r){return i.pageChange(r)})("page",function(){return i.currentPage}),e.qZA(),e.YNc(55,et,74,22,"ng-template",null,29,e.W1O),e.YNc(57,st,74,21,"ng-template",null,30,e.W1O),e.qZA()),2&t&&(e.xp6(13),e.Q6J("ngIf",i.isCrear||i.isAdmin),e.xp6(6),e.Q6J("ngModel",i.pageSize),e.xp6(13),e.Q6J("ngModel",i.filtro),e.xp6(20),e.Q6J("ngForOf",i.listJornada.content),e.xp6(1),e.Q6J("ngIf",0===i.listJornada.content.length),e.xp6(1),e.Q6J("pageSize",i.listJornada.pageable.pageSize)("collectionSize",i.listJornada.totalElements)("maxSize",i.maxSize)("rotate",!0)("boundaryLinks",!0))},dependencies:[g.sg,g.O5,Z.yS,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.On,l.F,l.sg,l.u,p.N9,h.w9,h.jq,g.uU]}),n})(),pt=(()=>{class n{constructor(t){this.http=t,this.url=`${f.N.api}/referencia`,this.isLoading=!1}ListarConsulta(){return this.http.get(`${this.url}/ConsultaReferenciasanioActual`)}sumarTotal(t){return t.reduce((i,o)=>i+o.total,0)}getReferenciaByFecha(t,i){return this.http.get(`${this.url}/ConsultaReferencias`,{params:{fechaInicio:t.toString(),fechaFin:i.toString()}})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _t(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"th",23),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&n){const t=a.$implicit,i=a.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.centro_medico),e.xp6(2),e.Oqu(t.total)}}function mt(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",24),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.isLoading?"cargando ...":"No se encontraron resultados")}}let gt=(()=>{class n{constructor(t){this.referenciaService=t,this.listRef=[],this.sumatotal=0}ngOnInit(){this.listar()}listar(){this.referenciaService.ListarConsulta().subscribe(t=>{this.listRef=t,this.sumatotal=this.referenciaService.sumarTotal(t)})}get isLoading(){return this.referenciaService.isLoading}onCensoFechaChange(){null!=this.fechaInicio&&null!=this.fechaFin&&(new Date(this.fechaInicio)>new Date(this.fechaFin)&&s().fire({position:"center",title:"Error",text:"La fecha de inicio debe ser mayor a la fecha fin",icon:"warning"}),this.referenciaService.getReferenciaByFecha(this.getFormattedDate(new Date(this.fechaInicio)),this.getFormattedDate(new Date(this.fechaFin))).subscribe(t=>{this.listRef=t,this.sumatotal=this.referenciaService.sumarTotal(t)}))}getFormattedDate(t){return t.toISOString().split("T")[0]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(pt))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-reporte-referencias"]],decls:48,vars:5,consts:[[1,"container-full"],[1,"d-flex","justify-content-end","mb-3"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink",""],["aria-current","page",1,"breadcrumb-item","active","text-danger"],[1,"d-flex","justify-content-between","mb-3"],[1,"fs-2"],[1,"row"],[1,"col-lg-3"],[1,"d-flex","align-items-center"],["for","fechainicio"],["type","date","id","fechainicio","name","fechaInicio",1,"form-control",3,"ngModel","ngModelChange"],["for","fechafin"],["type","date","id","fechafin","name","fechaFin",1,"form-control",3,"ngModel","ngModelChange"],[1,"table-responsive","mt-5"],[1,"table"],[1,"border-dark"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"text-align","center"],["scope","row"],["colspan","12",1,"text-center"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),e._uU(6,"Inicio "),e.qZA()(),e.TgZ(7,"li",6),e._uU(8,"Referencias medicas seg\xfan especialidad"),e.qZA()()()(),e.TgZ(9,"div",7)(10,"div")(11,"h3",8),e._uU(12,"REFERENCIAS MEDICAS SEG\xdaN ESPECIALIDAD"),e.qZA()()(),e.TgZ(13,"form")(14,"div",9)(15,"div",10)(16,"div",11)(17,"label",12),e._uU(18,"Fecha inicio:"),e.qZA(),e.TgZ(19,"input",13),e.NdJ("ngModelChange",function(r){return i.fechaInicio=r})("ngModelChange",function(){return i.onCensoFechaChange()}),e.qZA()()(),e.TgZ(20,"div",10)(21,"div",11)(22,"label",14),e._uU(23,"Fecha fin:"),e.qZA(),e.TgZ(24,"input",15),e.NdJ("ngModelChange",function(r){return i.fechaFin=r})("ngModelChange",function(){return i.onCensoFechaChange()}),e.qZA()()()()(),e.TgZ(25,"div",16)(26,"table",17)(27,"thead")(28,"tr",18)(29,"th",19),e._uU(30,"#"),e.qZA(),e.TgZ(31,"th",19),e._uU(32,"Especialidad"),e.qZA(),e.TgZ(33,"th",19),e._uU(34,"Total"),e.qZA()()(),e.TgZ(35,"tbody"),e.YNc(36,_t,7,3,"tr",20),e.YNc(37,mt,3,1,"tr",21),e.qZA()(),e.TgZ(38,"table",17)(39,"thead"),e._UZ(40,"tr",18),e.qZA(),e.TgZ(41,"tbody")(42,"tr")(43,"td",22)(44,"strong"),e._uU(45,"Total"),e.qZA()(),e.TgZ(46,"td",22),e._uU(47),e.qZA()()()()()()),2&t&&(e.xp6(19),e.Q6J("ngModel",i.fechaInicio),e.xp6(5),e.Q6J("ngModel",i.fechaFin),e.xp6(12),e.Q6J("ngForOf",i.listRef),e.xp6(1),e.Q6J("ngIf",0===i.listRef.length),e.xp6(10),e.Oqu(i.sumatotal))},dependencies:[g.sg,g.O5,Z.yS,l._Y,l.Fj,l.JJ,l.JL,l.On,l.F]}),n})();function ft(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"th",29),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",30)(6,"button",31),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(),u=e.MAs(47);return e.KtG(c.openLgEditar(u,r))}),e._UZ(7,"i",32),e.qZA(),e.TgZ(8,"button",33),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.eliminar(r.id))}),e._UZ(9,"i",34),e.qZA()()()}if(2&n){const t=a.$implicit,i=a.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.centroMedico)}}function Zt(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",35),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.isLoading?"cargando ...":"No se encontraron resultados")}}function ht(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El detalle es obligatorio"),e.qZA())}function vt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",36)(1,"h4",37),e._uU(2,"Referencia"),e.qZA(),e.TgZ(3,"button",38),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"form",39),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.guardar())}),e.TgZ(5,"div",40)(6,"div",41)(7,"div",42)(8,"div",43)(9,"div",44)(10,"label",45),e._uU(11,"Nombre"),e.qZA(),e.TgZ(12,"span",46),e._uU(13," *"),e.qZA(),e._UZ(14,"input",47),e.TgZ(15,"div",48),e.YNc(16,ht,2,0,"span",25),e.qZA()()()()()(),e.TgZ(17,"div",49)(18,"button",50),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Close click"))}),e._uU(19,"Cerrar"),e.qZA(),e.TgZ(20,"button",51),e._uU(21,"Guardar"),e.qZA()()()}if(2&n){const t=e.oxw();let i;e.xp6(4),e.Q6J("formGroup",t.FrormReferencia),e.xp6(10),e.Tol(t.esCampoValido("centroMedico")),e.xp6(2),e.Q6J("ngIf",null==(i=t.FrormReferencia.get("centroMedico"))||null==i.errors?null:i.errors.required)}}function Tt(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"El detalle es obligatorio"),e.qZA())}function Ct(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",36)(1,"h4",37),e._uU(2,"Paciente"),e.qZA(),e.TgZ(3,"button",38),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"form",39),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.editar())}),e.TgZ(5,"div",40)(6,"div",41)(7,"div",42)(8,"div",43)(9,"div",44)(10,"label",45),e._uU(11,"Nombre"),e.qZA(),e.TgZ(12,"span",46),e._uU(13," *"),e.qZA(),e._UZ(14,"input",47),e.TgZ(15,"div",48),e.YNc(16,Tt,2,0,"span",25),e.qZA()()()()()(),e.TgZ(17,"div",49)(18,"button",50),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.close("Close click"))}),e._uU(19,"Cerrar"),e.qZA(),e.TgZ(20,"button",51),e._uU(21,"Guardar"),e.qZA()()()}if(2&n){const t=e.oxw();let i;e.xp6(4),e.Q6J("formGroup",t.FrormReferencia),e.xp6(10),e.Tol(t.esCampoValido("centroMedico")),e.xp6(2),e.Q6J("ngIf",null==(i=t.FrormReferencia.get("centroMedico"))||null==i.errors?null:i.errors.required)}}let xt=(()=>{class n{constructor(t,i,o){this.modalService=t,this.especialidadService=i,this.fb=o,this.pageSize=5,this.currentPage=1,this.seGuardo=!1}ngOnInit(){this.FrormReferencia=this.fb.group({centroMedico:["",[l.kI.required]]}),this.especialidadService.getHospitalPage()}get listReferencia(){return this.especialidadService.listReferencia}get isLoading(){return this.especialidadService.isLoading}openModal(t){this.modalService.open(t,{size:"auto",centered:!0})}pageChange(t){this.especialidadService.getHospitalPage(t-1,this.pageSize)}esCampoValido(t){const i=this.FrormReferencia.get(t);return!i?.valid&&i?.touched?"is-invalid":i?.touched?"is-valid":""}guardar(){if(this.seGuardo=!0,!this.FrormReferencia.valid)return void s().fire({position:"center",title:"Error",text:"Faltan datos en el formulario",icon:"warning"});const t=this.FrormReferencia.value;t.vicioList?t.vicioList.length>0&&(t.vicio=t.vicioList.sort().join("_")):t.vicio=null,this.especialidadService.agregarReferencia(this.FrormReferencia.value).subscribe({next:()=>{s().fire({position:"center",title:"Buen trabajo",text:"Datos guardados con exito",icon:"success"}),this.especialidadService.getHospitalPage(),this.seGuardo=!1,this.modalService.dismissAll(),this.FrormReferencia.reset()},error:i=>{s().fire({position:"center",title:"Error",text:i.error.mensaje,icon:"error"})}})}openLgEditar(t,i){this.referencia=i,this.FrormReferencia.patchValue({centroMedico:this.referencia.centroMedico}),this.modalService.open(t,{size:"auto",centered:!0})}editar(){if(this.seGuardo=!0,!this.FrormReferencia.valid||!this.referencia.id)return void s().fire({position:"center",title:"Formulario no v\xe1lido",text:"Faltan datos en el formulario o el ID del censo no est\xe1 definido",icon:"warning"});const t=this.FrormReferencia.value;t.id=this.referencia.id,this.especialidadService.editar(t).subscribe({next:()=>{s().fire({position:"center",title:"Buen trabajo",text:"Datos actualizados con \xe9xito",icon:"success"}),this.especialidadService.getHospitalPage(),this.seGuardo=!1,this.modalService.dismissAll(),this.FrormReferencia.reset()},error:()=>{s().fire({position:"center",title:"Error",text:"Algo sali\xf3 mal, contacte a soporte",icon:"error"})}})}eliminar(t){s().fire({title:"\xbfEstas seguro?",text:"Esta opcion no se puede revertir!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, elimina esto!",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.especialidadService.eliminar(t).subscribe({next:o=>{s().fire("Eliminado!","El registro ha sido borrado.","success"),o&&this.especialidadService.getHospitalPage()},error:o=>{s().fire({position:"center",title:"Error",text:o.error.mensaje,icon:"error"})}})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.FF),e.Y36(A),e.Y36(l.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-referencia"]],decls:48,vars:5,consts:[[1,"container-full"],[1,"d-flex","justify-content-end","mb-3"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink",""],["aria-current","page",1,"breadcrumb-item","active","text-danger"],[1,"d-flex","justify-content-between","mb-3"],[1,"fs-2"],[1,"btn","btn-primary","fs-4",3,"click"],[1,"bi","bi-plus-square"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],[1,"mb-2","d-flex","align-items-center"],["for","table-filtering-search",1,"col-xs-3","col-sm-auto","col-form-label","me-1"],[1,"col-xs-3","col-sm-auto"],[1,"form-select",2,"width","auto","height","auto",3,"ngModel","ngModelChange"],["value","5"],["value","10"],["value","15"],["for","table-filtering-search",1,"col-xs-3","col-sm-auto","col-form-label","ms-1"],[1,"table-responsive","mt-5"],[1,"table"],[1,"border-dark"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"d-flex","justify-content-end","p-2",3,"pageSize","collectionSize","pageChange","page"],["content",""],["contentEdit",""],["scope","row"],[1,"d-flex","gap-1"],["type","button",1,"btn","btn-outline-success","me-2",3,"click"],[1,"bi","bi-pencil"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-x-lg"],["colspan","12",1,"text-center"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"mb-3"],["for","centroMedico",1,"form-label"],[1,"text-danger"],["type","text","formControlName","centroMedico","id","centroMedico","placeholder","Ingrese el nombre",1,"form-control"],[1,"invalid-feedback"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),e._uU(6,"Inicio "),e.qZA()(),e.TgZ(7,"li",6),e._uU(8,"Detalles de referencia"),e.qZA()()()(),e.TgZ(9,"div",7)(10,"div")(11,"h1",8),e._uU(12,"Detalles de Referencias"),e.qZA()(),e.TgZ(13,"div")(14,"button",9),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(45);return e.KtG(i.openModal(c))}),e._UZ(15,"i",10),e.qZA()()(),e.TgZ(16,"div",11)(17,"div",12)(18,"label",13),e._uU(19,"Mostrar"),e.qZA(),e.TgZ(20,"div",14)(21,"select",15),e.NdJ("ngModelChange",function(c){return i.pageSize=c})("ngModelChange",function(){return i.pageChange(1)}),e.TgZ(22,"option",16),e._uU(23,"5"),e.qZA(),e.TgZ(24,"option",17),e._uU(25,"10"),e.qZA(),e.TgZ(26,"option",18),e._uU(27,"15"),e.qZA()()(),e.TgZ(28,"label",19),e._uU(29,"Registros"),e.qZA()()(),e.TgZ(30,"div",20)(31,"table",21)(32,"thead")(33,"tr",22)(34,"th",23),e._uU(35,"#"),e.qZA(),e.TgZ(36,"th",23),e._uU(37,"Detalles de referencia"),e.qZA(),e.TgZ(38,"th",23),e._uU(39,"Acciones"),e.qZA()()(),e.TgZ(40,"tbody"),e.YNc(41,ft,10,2,"tr",24),e.YNc(42,Zt,3,1,"tr",25),e.qZA()()(),e.TgZ(43,"ngb-pagination",26),e.NdJ("pageChange",function(c){return i.pageChange(c)})("page",function(){return i.currentPage}),e.qZA(),e.YNc(44,vt,22,4,"ng-template",null,27,e.W1O),e.YNc(46,Ct,22,4,"ng-template",null,28,e.W1O),e.qZA()}2&t&&(e.xp6(21),e.Q6J("ngModel",i.pageSize),e.xp6(20),e.Q6J("ngForOf",i.listReferencia.content),e.xp6(1),e.Q6J("ngIf",0===i.listReferencia.content.length),e.xp6(1),e.Q6J("pageSize",i.listReferencia.pageable.pageSize)("collectionSize",i.listReferencia.totalElements))},dependencies:[g.sg,g.O5,Z.yS,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.On,l.sg,l.u,p.N9]}),n})();var F=d(2466);const At=[{path:"censo",component:we,canActivate:[F.i],data:{expectedAuthorities:["CENSO_MEDICO"]}},{path:"jornadaMedica",component:ut,canActivate:[F.i],data:{expectedAuthorities:["JORNADA_MEDICA"]}},{path:"ReporteReferencias",component:gt},{path:"ReferenciaNew",component:xt}];let qt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[Z.Bz.forChild(At),Z.Bz]}),n})(),Ut=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.ez,qt,l.u5,l.UX,p.jF,h.A0]}),n})()},5861:(q,b,d)=>{function g(l,v,x,s,C,e,p){try{var h=l[e](p),f=h.value}catch(T){return void x(T)}h.done?v(f):Promise.resolve(f).then(s,C)}function Z(l){return function(){var v=this,x=arguments;return new Promise(function(s,C){var e=l.apply(v,x);function p(f){g(e,s,C,p,h,"next",f)}function h(f){g(e,s,C,p,h,"throw",f)}p(void 0)})}}d.d(b,{Z:()=>Z})}}]);