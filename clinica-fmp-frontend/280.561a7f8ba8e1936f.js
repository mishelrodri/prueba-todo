"use strict";(self.webpackChunkclinica_fmp_frontend=self.webpackChunkclinica_fmp_frontend||[]).push([[280],{2280:(fe,b,c)=>{c.r(b),c.d(b,{CertificadoModule:()=>_e,options:()=>pe});var p=c(6895),h=c(3599),l=c(433),_=c(7926),T=c(6493),C=c(9861),A=c(8372),q=c(1884),E=c(5226),u=c.n(E),e=c(1571),x=c(2340),U=c(7579),N=c(529);let J=(()=>{class n{constructor(t){this.http=t,this.api=`${x.N.api}/certificacion`,this.apiPaciente=`${x.N.api}/paciente/sin-certificado`,this.fechaSincrona=new U.x}get formatDate(){return C.Z}obtenerFechaFormateada(){return this.formatDate().format("YYYY")}listarPaciente(){this.http.get(`${this.apiPaciente}`).subscribe({next:t=>{this.pacienteList=t}})}listarPacienteEditar(t){this.http.get(`${this.apiPaciente}/${t}`).subscribe({next:i=>{this.pacienteList=i}})}numeroExpedienteSincrono(t=this.obtenerFechaFormateada()){this.http.get(`${this.api}/numero-expediente/${t}`).subscribe({next:i=>{this.fechaSincrona.next(i)}})}getFechaObservable(){return this.fechaSincrona.asObservable()}listarParametros(t=2,i=0,r="numeroExpediente,asc",o=""){this.http.get(`${this.api}`,{params:{page:i,size:t,sort:r,filtro:o}}).subscribe({next:s=>{this.certificadoList=s}})}eliminar(t){return this.http.delete(`${this.api}/${t}`)}editar(t,i){return this.http.put(`${this.api}/${t}`,i)}agregar(t){return this.http.post(`${this.api}`,t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(N.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var f=c(9061),v=c(723),k=c(1622),Z=c(1094);function F(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(),o=e.MAs(63);return e.KtG(r.openLg(o))}),e._UZ(1,"i",34),e.qZA()}}function S(n,a){1&n&&(e.TgZ(0,"span",45),e._uU(1,"Entregado"),e.qZA())}function I(n,a){1&n&&(e.TgZ(0,"span",46),e._uU(1,"Pendiente"),e.qZA())}function Q(n,a){1&n&&(e.TgZ(0,"span",47),e._uU(1,"Activo"),e.qZA())}function Y(n,a){1&n&&(e.TgZ(0,"span",48),e._uU(1,"Inactivo"),e.qZA())}function y(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,o=e.oxw(2),s=e.MAs(65);return e.KtG(o.openLgEditar(s,r))}),e._UZ(1,"i",50),e.qZA()}}function O(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.eliminar(r.id))}),e._UZ(1,"i",52),e.qZA()}}function M(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.YNc(8,S,2,0,"span",36),e.YNc(9,I,2,0,"span",37),e.qZA(),e.TgZ(10,"td"),e.YNc(11,Q,2,0,"span",38),e.YNc(12,Y,2,0,"span",39),e.qZA(),e.TgZ(13,"td",40)(14,"button",41),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(2),m=e.MAs(67);return e.KtG(s.openLgView(m,o))}),e._UZ(15,"i",42),e.qZA(),e.YNc(16,y,2,0,"button",43),e.YNc(17,O,2,0,"button",44),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(2),e.Oqu(t.numeroExpediente),e.xp6(2),e.Oqu(i.formatDate(t.fecha).format("LL")),e.xp6(2),e.Oqu(t.paciente.nombre+" "+t.paciente.apellido),e.xp6(2),e.Q6J("ngIf",t.certificado),e.xp6(1),e.Q6J("ngIf",!t.certificado),e.xp6(2),e.Q6J("ngIf",t.estado),e.xp6(1),e.Q6J("ngIf",!t.estado),e.xp6(4),e.Q6J("ngIf",i.isEditar||i.isAdmin),e.xp6(1),e.Q6J("ngIf",i.isEliminar&&t.estado||i.isAdmin&&t.estado)}}function P(n,a){if(1&n&&(e.ynx(0),e.YNc(1,M,18,9,"tr",35),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.listar)}}function G(n,a){1&n&&(e.TgZ(0,"tr")(1,"td",53),e._uU(2,"No existen registros disponibles"),e.qZA()())}function L(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," El n\xfamero de expediente es requerido "),e.qZA())}function w(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," El n\xfamero de expediente no cumple con el tama\xf1o m\xednimo de 12 caracteres "),e.qZA())}function z(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," El n\xfamero de expediente no cumple con el tama\xf1o m\xe1ximo de 20 caracteres "),e.qZA())}function K(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," El n\xfamero de expediente solo debe contener letras y d\xedgitos "),e.qZA())}function $(n,a){if(1&n&&(e.TgZ(0,"div",78),e.YNc(1,L,2,0,"div",79),e.YNc(2,w,2,0,"div",79),e.YNc(3,z,2,0,"div",79),e.YNc(4,K,2,0,"div",79),e.qZA()),2&n){const t=e.oxw(2);let i,r,o,s;e.xp6(1),e.Q6J("ngIf",null==(i=t.form.get("numeroExpediente"))||null==i.errors?null:i.errors.required),e.xp6(1),e.Q6J("ngIf",null==(r=t.form.get("numeroExpediente"))||null==r.errors?null:r.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.get("numeroExpediente"))||null==o.errors?null:o.errors.maxlength),e.xp6(1),e.Q6J("ngIf",null==(s=t.form.get("numeroExpediente"))||null==s.errors?null:s.errors.pattern)}}function V(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1,"La fecha de creaci\xf3n es requerida"),e.qZA())}function B(n,a){if(1&n&&(e.TgZ(0,"div",78),e.YNc(1,V,2,0,"div",79),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.Q6J("ngIf",null==(i=t.form.get("fecha"))||null==i.errors?null:i.errors.required)}}function H(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1,"El paciente es requerido"),e.qZA())}function D(n,a){if(1&n&&(e.TgZ(0,"div",78),e.YNc(1,H,2,0,"div",79),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.Q6J("ngIf",null==(i=t.form.get("idPaciente"))||null==i.errors?null:i.errors.required)}}const g=function(n,a){return{"is-invalid":n,"is-valid":a}};function j(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",54)(1,"h4",55),e._uU(2,"Agregar nuevo ingreso"),e.qZA(),e.TgZ(3,"button",56),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"form",57),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.guardar())}),e.TgZ(5,"div",58)(6,"div",0)(7,"div",59)(8,"div",60)(9,"div",61)(10,"label",62),e._uU(11,"N\xfamero de expediente"),e.qZA(),e.TgZ(12,"span",63),e._uU(13," *"),e.qZA(),e._UZ(14,"input",64),e.YNc(15,$,5,4,"div",65),e.qZA()(),e.TgZ(16,"div",66)(17,"div",61)(18,"div")(19,"label",67),e._uU(20,"Manual"),e.qZA()(),e.TgZ(21,"div",68)(22,"input",69),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cambiarManual())}),e.qZA()()()(),e.TgZ(23,"div",70)(24,"div",61)(25,"label",71),e._uU(26,"Fecha de creaci\xf3n"),e.qZA(),e.TgZ(27,"span",63),e._uU(28," *"),e.qZA(),e.TgZ(29,"input",72),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.capturarFecha())}),e.qZA(),e.YNc(30,B,2,1,"div",65),e.qZA()()(),e.TgZ(31,"div",59)(32,"div",70)(33,"div",61)(34,"label",73),e._uU(35,"Paciente"),e.qZA(),e.TgZ(36,"span",63),e._uU(37," *"),e.qZA(),e._UZ(38,"ng-select",74),e.YNc(39,D,2,1,"div",65),e.qZA()(),e.TgZ(40,"div",70),e._UZ(41,"div",61),e.qZA()()()(),e.TgZ(42,"div",75)(43,"button",76),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("Close click"))}),e._uU(44,"Cerrar"),e.qZA(),e.TgZ(45,"button",77),e._uU(46,"Guardar"),e.qZA()()()}if(2&n){const t=e.oxw();let i,r,o,s,m;e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(10),e.Q6J("dropSpecialCharacters",!1)("ngClass",e.WLB(8,g,t.seGuardo&&(null==(i=t.form.get("numeroExpediente"))?null:i.errors),t.seGuardo&&(null==(i=t.form.get("numeroExpediente"))?null:i.valid))),e.xp6(1),e.Q6J("ngIf",null==(r=t.form.get("numeroExpediente"))?null:r.errors),e.xp6(14),e.Q6J("ngClass",e.WLB(11,g,t.seGuardo&&(null==(o=t.form.get("fecha"))?null:o.errors),t.seGuardo&&(null==(o=t.form.get("fecha"))?null:o.valid))),e.xp6(1),e.Q6J("ngIf",null==(s=t.form.get("fecha"))?null:s.errors),e.xp6(8),e.Q6J("items",t.listarPaciente),e.xp6(1),e.Q6J("ngIf",null==(m=t.form.get("idPaciente"))?null:m.errors)}}function R(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," El n\xfamero de expediente es requerido "),e.qZA())}function W(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," El n\xfamero de expediente no cumple con el tama\xf1o m\xednimo de 12 caracteres "),e.qZA())}function X(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," El n\xfamero de expediente no cumple con el tama\xf1o m\xe1ximo de 20 caracteres "),e.qZA())}function ee(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," El n\xfamero de expediente solo debe contener letras y d\xedgitos "),e.qZA())}function te(n,a){if(1&n&&(e.TgZ(0,"div",78),e.YNc(1,R,2,0,"div",79),e.YNc(2,W,2,0,"div",79),e.YNc(3,X,2,0,"div",79),e.YNc(4,ee,2,0,"div",79),e.qZA()),2&n){const t=e.oxw(2);let i,r,o,s;e.xp6(1),e.Q6J("ngIf",null==(i=t.form.get("numeroExpediente"))||null==i.errors?null:i.errors.required),e.xp6(1),e.Q6J("ngIf",null==(r=t.form.get("numeroExpediente"))||null==r.errors?null:r.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.get("numeroExpediente"))||null==o.errors?null:o.errors.maxlength),e.xp6(1),e.Q6J("ngIf",null==(s=t.form.get("numeroExpediente"))||null==s.errors?null:s.errors.pattern)}}function ie(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1,"La fecha de creaci\xf3n es requerida"),e.qZA())}function ne(n,a){if(1&n&&(e.TgZ(0,"div",78),e.YNc(1,ie,2,0,"div",79),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.Q6J("ngIf",null==(i=t.form.get("fecha"))||null==i.errors?null:i.errors.required)}}function re(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1,"El paciente es requerido"),e.qZA())}function oe(n,a){if(1&n&&(e.TgZ(0,"div",78),e.YNc(1,re,2,0,"div",79),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.Q6J("ngIf",null==(i=t.form.get("idPaciente"))||null==i.errors?null:i.errors.required)}}function ae(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div")(2,"label",84),e._uU(3,"Estado"),e.qZA()(),e.TgZ(4,"div",68)(5,"input",85),e.NdJ("change",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cambiarEstado())}),e.qZA(),e.TgZ(6,"label",86),e._uU(7),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(7),e.Oqu(t.estadoActual)}}function ce(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",54)(1,"h4",55),e._uU(2,"Editar nuevo ingreso"),e.qZA(),e.TgZ(3,"button",56),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"form",57),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.editar())}),e.TgZ(5,"div",58)(6,"div",0)(7,"div",59)(8,"div",70)(9,"div",61)(10,"label",62),e._uU(11,"N\xfamero de expediente"),e.qZA(),e.TgZ(12,"span",63),e._uU(13," *"),e.qZA(),e._UZ(14,"input",64),e.YNc(15,te,5,4,"div",65),e.qZA()(),e.TgZ(16,"div",70)(17,"div",61)(18,"label",71),e._uU(19,"Fecha de creaci\xf3n"),e.qZA(),e.TgZ(20,"span",63),e._uU(21," *"),e.qZA(),e._UZ(22,"input",80),e.YNc(23,ne,2,1,"div",65),e.qZA()()(),e.TgZ(24,"div",59)(25,"div",70)(26,"div",61)(27,"label",73),e._uU(28,"Paciente"),e.qZA(),e.TgZ(29,"span",63),e._uU(30," *"),e.qZA(),e._UZ(31,"ng-select",74),e.YNc(32,oe,2,1,"div",65),e.qZA()(),e.TgZ(33,"div",70)(34,"div",61)(35,"div")(36,"label",81),e._uU(37,"Certificado"),e.qZA()(),e.TgZ(38,"div",68)(39,"input",82),e.NdJ("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cambiarCertificado())}),e.qZA(),e.TgZ(40,"label",83),e._uU(41),e.qZA()()()()(),e.TgZ(42,"div",59)(43,"div",70)(44,"div",61),e.YNc(45,ae,8,1,"ng-container",79),e.qZA()(),e.TgZ(46,"div",70),e._UZ(47,"div",61),e.qZA()()()(),e.TgZ(48,"div",75)(49,"button",76),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("Close click"))}),e._uU(50,"Cerrar"),e.qZA(),e.TgZ(51,"button",77),e._uU(52,"Guardar"),e.qZA()()()}if(2&n){const t=e.oxw();let i,r,o,s,m;e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(10),e.Q6J("dropSpecialCharacters",!1)("ngClass",e.WLB(10,g,t.seGuardo&&(null==(i=t.form.get("numeroExpediente"))?null:i.errors),t.seGuardo&&(null==(i=t.form.get("numeroExpediente"))?null:i.valid))),e.xp6(1),e.Q6J("ngIf",null==(r=t.form.get("numeroExpediente"))?null:r.errors),e.xp6(7),e.Q6J("ngClass",e.WLB(13,g,t.seGuardo&&(null==(o=t.form.get("fecha"))?null:o.errors),t.seGuardo&&(null==(o=t.form.get("fecha"))?null:o.valid))),e.xp6(1),e.Q6J("ngIf",null==(s=t.form.get("fecha"))?null:s.errors),e.xp6(8),e.Q6J("items",t.listarPaciente),e.xp6(1),e.Q6J("ngIf",null==(m=t.form.get("idPaciente"))?null:m.errors),e.xp6(9),e.Oqu(t.certificadoActual),e.xp6(4),e.Q6J("ngIf",!t.mostrarEstado&&t.isAdmin)}}function se(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",54)(1,"h4",55),e._uU(2,"Ver detalles del nuevo ingreso"),e.qZA(),e.TgZ(3,"button",56),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"div",58)(5,"div",0)(6,"div",59)(7,"div",70)(8,"div",61)(9,"label",87),e._uU(10,"N\xfamero de Expediente"),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",70)(14,"div",61)(15,"label",87),e._uU(16,"Fecha de creaci\xf3n"),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.qZA()()()(),e.TgZ(19,"div",59)(20,"div",70)(21,"div",61)(22,"label",87),e._uU(23,"Paciente"),e.qZA(),e.TgZ(24,"p"),e._uU(25),e.qZA()()(),e.TgZ(26,"div",70)(27,"div",61)(28,"label",87),e._uU(29,"Certificado"),e.qZA(),e.TgZ(30,"p"),e._uU(31),e.qZA()()()(),e.TgZ(32,"div",59)(33,"div",70)(34,"div",61)(35,"label",87),e._uU(36,"Estado"),e.qZA(),e.TgZ(37,"p"),e._uU(38),e.qZA()()(),e.TgZ(39,"div",70),e._UZ(40,"div",61),e.qZA()()()(),e.TgZ(41,"div",75)(42,"button",76),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("Close click"))}),e._uU(43,"Cerrar"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(12),e.Oqu(t.certificado.numeroExpediente),e.xp6(6),e.Oqu(t.formatDate(t.certificado.fecha).format("LL")),e.xp6(7),e.hij(" ",t.certificado.paciente.nombre+" "+t.certificado.paciente.apellido," "),e.xp6(6),e.hij(" ",t.certificado.certificado?"Entregado":"Pendiente"," "),e.xp6(7),e.Oqu(t.certificado.estado?"Activo":"Inactivo")}}const d=function(n){return{"d-none":n}},ue=[{path:"",component:(()=>{class n{constructor(t,i,r,o,s){this.service=t,this.modalService=i,this.fb=r,this.config=o,this.tokenService=s,this.pageList=_.Hj,this.maxSize=_.$,this.page=_.Md,this.size=_.dp,this.seGuardo=!1,this.cambioOrden=!0,this.mostrarEstado=!1,this.estadoActual="Activo",this.certificadoActual="Entregado",this.vicios=[{vicio:"TABACO"},{vicio:"ALCOHOL"},{vicio:"DROGAS"}],this.sort="numeroExpediente,asc",this.isCrear=!1,this.isEditar=!1,this.isEliminar=!1,this.isAdmin=!1,this.permiso="NUEVO_INGRESO_",this.config.notFoundText="No se encontraron resultados",this.buscar=this.fb.group({filter:["",[]]}),this.form=this.fb.group({manual:["",[]],activar:["",[]],numeroExpediente:["",[l.kI.required,l.kI.minLength(12),l.kI.maxLength(20),l.kI.pattern(T.cP)]],fecha:["",[l.kI.required]],idPaciente:["",[l.kI.required]],certificado:["",[]],estado:["",[]]})}ngOnInit(){this.isAdmin=this.tokenService.isSuperAdmin(),this.isCrear=this.tokenService.isPermisos(this.permiso,"CREAR"),this.isEditar=this.tokenService.isPermisos(this.permiso,"EDITAR"),this.isEliminar=this.tokenService.isPermisos(this.permiso,"ELIMINAR"),this.buscar.get("filter")?.valueChanges.pipe((0,A.b)(500),(0,q.x)()).subscribe(t=>{this.page=0,this.service.listarParametros(this.size,this.page,this.sort,t)}),this.service.listarPaciente(),this.service.numeroExpedienteSincrono()}get listar(){return this.service.certificadoList?this.service.certificadoList.content:[]}get listarPaciente(){return this.service.pacienteList?this.service.pacienteList:[]}get listarTotal(){return this.service.certificadoList?this.service.certificadoList.totalElements:0}get filter(){return this.buscar.get("filter")?this.buscar.get("filter")?.value:""}get formatDate(){return C.Z}cambiarEstado(){this.estadoActual=this.form.get("estado")?.value?"Activo":"Inactivo"}refresh(){this.service.listarParametros(this.size,this.page-1,this.sort,this.filter)}refreshSize(){this.page=0,this.service.listarParametros(this.size,this.page,this.sort,this.filter)}ordenar(t){this.cambioOrden=!this.sort.includes(t)||!this.cambioOrden,this.page=0,this.sort=this.cambioOrden?t+",asc":t+",desc",this.service.listarParametros(this.size,this.page,this.sort,this.filter)}cambiarCertificado(){this.certificadoActual=this.form.get("certificado")?.value?"Entregado":"Pendiente"}cambiarManual(){this.form.get("manual")?.value?this.form.get("numeroExpediente")?.enable():this.form.get("numeroExpediente")?.disable()}obtenerFechaFormateada(){return this.formatDate().format("YYYY-MM-DD")}capturarFecha(){const t=this.formatDate(this.form.get("fecha")?.value);!t.isValid()||(this.service.numeroExpedienteSincrono(t.format("YYYY")),this.service.getFechaObservable().subscribe(i=>{this.form.patchValue({numeroExpediente:i.numeroExpediente})}))}openLg(t){this.seGuardo=!1,this.reiniciarFormulario(),this.cambiarManual(),this.modalService.open(t,{size:"lg"})}openLgEditar(t,i){this.seGuardo=!1,this.certificado=i,this.service.listarPacienteEditar(this.certificado.paciente.id),this.mostrarEstado=this.certificado.estado,this.form.patchValue({numeroExpediente:this.certificado.numeroExpediente,fecha:this.certificado.fecha,certificado:this.certificado.certificado,idPaciente:this.certificado.paciente.id,estado:this.certificado.estado}),this.form.get("numeroExpediente")?.disable(),this.cambiarEstado(),this.cambiarCertificado(),this.modalService.open(t,{size:"lg"})}openLgView(t,i){this.certificado=i,this.modalService.open(t,{size:"lg"})}reiniciarFormulario(){this.service.listarPaciente(),this.service.numeroExpedienteSincrono(),this.service.getFechaObservable().subscribe(t=>{this.form.patchValue({numeroExpediente:t.numeroExpediente})}),this.form.patchValue({manual:!1,activar:!1,fecha:this.obtenerFechaFormateada(),idPaciente:null,estado:!1})}guardar(){this.seGuardo=!0,this.form.valid?(this.form.get("numeroExpediente")?.enable(),this.service.agregar(this.form.value).subscribe({next:()=>{u().fire({position:"center",title:"\xa1\xc9xito!",text:"Los datos se han guardado correctamente.",icon:"success"}),this.service.listarParametros(this.size,this.page-1,this.sort,this.filter),this.reiniciarFormulario(),this.seGuardo=!1,this.modalService.dismissAll()},error:i=>{u().fire({position:"center",title:"Ocurri\xf3 un error",text:i.error.mensaje,icon:"error"})}})):u().fire({position:"center",title:"Datos incompletos",text:"Por favor, revisa los campos marcados.",icon:"warning"})}editar(){this.seGuardo=!0,this.form.valid?(this.form.get("numeroExpediente")?.enable(),this.form.get("otro")?.enable(),this.service.editar(this.certificado.id,this.form.value).subscribe({next:()=>{u().fire({position:"center",title:"\xa1\xc9xito!",text:"Los datos se han guardado correctamente.",icon:"success"}),this.service.listarParametros(this.size,this.page-1,this.sort,this.filter),this.reiniciarFormulario(),this.seGuardo=!1,this.modalService.dismissAll()},error:i=>{u().fire({position:"center",title:"Ocurri\xf3 un error",text:i.error.mensaje,icon:"error"})}})):u().fire({position:"center",title:"Datos incompletos",text:"Por favor, revisa los campos marcados.",icon:"warning"})}eliminar(t){u().fire({title:"\xbfConfirmar eliminaci\xf3n?",text:"Esta acci\xf3n no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&(this.service.eliminar(t).subscribe({next:r=>{r&&this.service.listarParametros(this.size,this.page-1,this.sort,this.filter)}}),u().fire("Eliminado","El registro ha sido eliminado exitosamente.","success"))})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(J),e.Y36(f.FF),e.Y36(l.qu),e.Y36(v.$q),e.Y36(k.B))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-certificado"]],decls:68,vars:44,consts:[[1,"container-fluid"],[1,"header__page","d-flex","justify-content-end","mb-3"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink",""],["aria-current","page",1,"breadcrumb-item","active"],[1,"d-flex","justify-content-between","mb-3"],[1,"fs-3"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[1,"d-flex","flex-column","gap-2","flex-lg-row","justify-content-between","mb-3"],[1,"d-flex","align-items-center","mb-3"],["for","pageSize",1,"col-form-label","me-2"],["id","pageSize","bindLabel","label","bindValue","value",3,"items","ngModel","clearable","ngModelChange"],["for","pageSize",1,"col-form-label","ms-2"],[3,"formGroup"],["for","filter",1,"col-form-label","me-2"],["id","filter","type","text","formControlName","filter",1,"form-control"],[1,"table-responsive","mb-3"],[1,"table","align-middle"],[1,"border-dark"],["scope","col",3,"click"],[1,"bi","bi-caret-up-fill",3,"ngClass"],[1,"bi","bi-caret-down-fill",3,"ngClass"],["scope","col"],[4,"ngIf","ngIfElse"],["noRecords",""],[1,"d-flex","flex-column","gap-2","flex-lg-row","justify-content-between"],[1,"text-black"],[3,"collectionSize","page","pageSize","maxSize","rotate","boundaryLinks","pageChange"],["content",""],["contentEdit",""],["contentView",""],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-square"],[4,"ngFor","ngForOf"],["class","badge bg-primary",4,"ngIf"],["class","badge bg-warning text-black",4,"ngIf"],["class","badge bg-success",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],[1,"d-flex","flex-row"],["type","button",1,"btn","btn-outline-secondary","me-2",3,"click"],[1,"bi","bi-eye"],["type","button","class","btn btn-outline-success me-2",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"badge","bg-primary"],[1,"badge","bg-warning","text-black"],[1,"badge","bg-success"],[1,"badge","bg-danger"],["type","button",1,"btn","btn-outline-success","me-2",3,"click"],[1,"bi","bi-pencil"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-x-lg"],["colspan","6",1,"text-center"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"row"],[1,"col-10","col-lg-5"],[1,"mb-3"],["for","numeroExpediente",1,"form-label"],[1,"text-danger"],["type","text","formControlName","numeroExpediente","id","numeroExpediente","placeholder","Ingrese el n\xfamero de expediente","mask","SSSSS0000000",1,"form-control",3,"dropSpecialCharacters","ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"col-2","col-lg-1"],["for","manual",1,"form-label"],[1,"form-check","form-switch"],["type","checkbox","id","manual","formControlName","manual",1,"form-check-input",3,"change"],[1,"col-12","col-lg-6"],["for","fecha",1,"form-label"],["type","date","formControlName","fecha","id","fecha",1,"form-control",3,"ngClass","change"],["for","idPaciente",1,"form-label"],["formControlName","idPaciente","id","idPaciente","placeholder","Seleccione al paciente","bindLabel","labelPaciente","bindValue","id",3,"items"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"invalid-feedback"],[4,"ngIf"],["type","date","formControlName","fecha","id","fecha",1,"form-control",3,"ngClass"],["for","certificado",1,"form-label"],["type","checkbox","id","certificado","formControlName","certificado",1,"form-check-input",3,"change"],["for","certificado",1,"form-check-label"],["for","estado",1,"form-label"],["type","checkbox","id","estado","formControlName","estado",1,"form-check-input",3,"change"],["for","estado",1,"form-check-label"],[1,"form-label","fw-bold"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"ol",3)(4,"li",4)(5,"a",5),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"li",6),e._uU(8,"Nuevo ingreso"),e.qZA()()()(),e.TgZ(9,"div",7)(10,"div")(11,"h1",8),e._uU(12,"Nuevo ingreso"),e.qZA()(),e.TgZ(13,"div"),e.YNc(14,F,2,0,"button",9),e.qZA()(),e.TgZ(15,"div",10)(16,"div",11)(17,"label",12),e._uU(18,"Mostrar:"),e.qZA(),e.TgZ(19,"ng-select",13),e.NdJ("ngModelChange",function(o){return i.size=o})("ngModelChange",function(){return i.refreshSize()}),e.qZA(),e.TgZ(20,"label",14),e._uU(21,"registros"),e.qZA()(),e.TgZ(22,"form",15)(23,"div",11)(24,"label",16),e._uU(25,"Buscar:"),e.qZA(),e._UZ(26,"input",17),e.qZA()()(),e.TgZ(27,"div",18)(28,"table",19)(29,"thead")(30,"tr",20)(31,"th",21),e.NdJ("click",function(){return i.ordenar("numeroExpediente")}),e._uU(32," # Expediente"),e._UZ(33,"i",22)(34,"i",23),e.qZA(),e.TgZ(35,"th",21),e.NdJ("click",function(){return i.ordenar("fecha")}),e._uU(36," Fecha de Creaci\xf3n"),e._UZ(37,"i",22)(38,"i",23),e.qZA(),e.TgZ(39,"th",21),e.NdJ("click",function(){return i.ordenar("paciente.nombre")}),e._uU(40," Paciente"),e._UZ(41,"i",22)(42,"i",23),e.qZA(),e.TgZ(43,"th",21),e.NdJ("click",function(){return i.ordenar("certificado")}),e._uU(44," Certificado"),e._UZ(45,"i",22)(46,"i",23),e.qZA(),e.TgZ(47,"th",21),e.NdJ("click",function(){return i.ordenar("estado")}),e._uU(48," Estado"),e._UZ(49,"i",22)(50,"i",23),e.qZA(),e.TgZ(51,"th",24),e._uU(52,"Acciones"),e.qZA()()(),e.TgZ(53,"tbody"),e.YNc(54,P,2,1,"ng-container",25),e.YNc(55,G,3,0,"ng-template",null,26,e.W1O),e.qZA()()(),e.TgZ(57,"div",27)(58,"div")(59,"p",28),e._uU(60),e.qZA()(),e.TgZ(61,"ngb-pagination",29),e.NdJ("pageChange",function(o){return i.page=o})("pageChange",function(){return i.refresh()}),e.qZA()()(),e.YNc(62,j,47,14,"ng-template",null,30,e.W1O),e.YNc(64,ce,53,16,"ng-template",null,31,e.W1O),e.YNc(66,se,44,5,"ng-template",null,32,e.W1O)),2&t){const r=e.MAs(56);e.xp6(14),e.Q6J("ngIf",i.isCrear||i.isAdmin),e.xp6(5),e.Q6J("items",i.pageList)("ngModel",i.size)("clearable",!1),e.xp6(3),e.Q6J("formGroup",i.buscar),e.xp6(11),e.Q6J("ngClass",e.VKq(24,d,"numeroExpediente,asc"!==i.sort||!i.cambioOrden)),e.xp6(1),e.Q6J("ngClass",e.VKq(26,d,"numeroExpediente,desc"!==i.sort||i.cambioOrden)),e.xp6(3),e.Q6J("ngClass",e.VKq(28,d,"fecha,asc"!==i.sort||!i.cambioOrden)),e.xp6(1),e.Q6J("ngClass",e.VKq(30,d,"fecha,desc"!==i.sort||i.cambioOrden)),e.xp6(3),e.Q6J("ngClass",e.VKq(32,d,"paciente.nombre,asc"!==i.sort||!i.cambioOrden)),e.xp6(1),e.Q6J("ngClass",e.VKq(34,d,"paciente.nombre,desc"!==i.sort||i.cambioOrden)),e.xp6(3),e.Q6J("ngClass",e.VKq(36,d,"certificado,desc"!==i.sort||i.cambioOrden)),e.xp6(1),e.Q6J("ngClass",e.VKq(38,d,"certificado,asc"!==i.sort||!i.cambioOrden)),e.xp6(3),e.Q6J("ngClass",e.VKq(40,d,"estado,desc"!==i.sort||i.cambioOrden)),e.xp6(1),e.Q6J("ngClass",e.VKq(42,d,"estado,asc"!==i.sort||!i.cambioOrden)),e.xp6(4),e.Q6J("ngIf",i.listar.length>0)("ngIfElse",r),e.xp6(6),e.hij("Total de resgistros: ",i.listarTotal,""),e.xp6(1),e.Q6J("collectionSize",i.listarTotal)("page",i.page)("pageSize",i.size)("maxSize",i.maxSize)("rotate",!0)("boundaryLinks",!0)}},dependencies:[p.mk,p.sg,p.O5,h.yS,l._Y,l.Fj,l.Wl,l.JJ,l.JL,l.On,l.sg,l.u,f.N9,v.w9,Z.hx]}),n})(),canActivate:[c(2466).i],data:{expectedAuthorities:["NUEVO_INGRESO"]}}];let me=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[h.Bz.forChild(ue),h.Bz]}),n})();const pe=null;let _e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,me,l.u5,l.UX,f.jF,f.ZS,v.A0,Z.yI.forRoot()]}),n})()}}]);